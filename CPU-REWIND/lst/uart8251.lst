C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 1   


C51 COMPILER V8.05a, COMPILATION OF MODULE UART8251
OBJECT MODULE PLACED IN .\exe\uart8251.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE src\uart8251.c OPTIMIZE(SIZE) CODE SYMBOLS PRINT(.\lst\uart8251.lst) PREPRI
                    -NT(.\lst\uart8251.i) OBJECT(.\exe\uart8251.obj)

line level    source

   1          /*************************************************************************************/
   2          /* 18/01/10              \SRC\uart8251.c                                                                         */
   3          /*************************************************************************************/
   4          
   5          #include "reg51.h"
   6          #include <ctype.h>
   7          #include "stdio.h"
   8          #include "util.h"
   9          #include "uart8251.h"
  10          #include "pio.h"
  11          
  12          /*************************************************************************************/
  13          sbit TXE_U27=   P1^1;
  14          sbit TXE_U30=   P1^0 ;
  15          
  16          static char c;
  17          static unsigned char xdata buff_U27[256];
  18          static unsigned char xdata buff_U30[256];
  19          static unsigned char inizio=0;
  20          static unsigned char fine_u30=0;
  21          static unsigned char fine_u27=0;
  22          static unsigned int xdata start_ritardo=0;
  23          
  24          //static unsigned char xdata buff[256];
  25          static unsigned char i;
  26          extern unsigned char del;
  27          extern unsigned char tipo_scheda;
  28          extern int get_timer0();
  29          volatile unsigned char xdata uartU27[2]  _at_ UART8251_U27_DATA_ADDR ;
  30          volatile unsigned char xdata uartU30[2]  _at_ UART8251_U30_DATA_ADDR ;
  31          //volatile unsigned char xdata * uartU27 = (char xdata *) UART8251_U27_DATA_ADDR;
  32          //volatile unsigned char xdata * uartU30 = (char xdata *) UART8251_U30_DATA_ADDR;
  33          static void uartU30_init ( ) ;
  34          
  35          /*------------------------------------------------
  36                  Interrupt Service Routines
  37          ------------------------------------------------*/
  38          
  39          static void RX_RDY_U30_isr (void) interrupt 0  //Int0
  40          {
  41   1              EA = 0;
  42   1              buff_U30[fine_u30++] = uartU30[0];
  43   1              EA  = 1;
  44   1      }
  45          
  46          static void RX_RDY_U27_isr (void) interrupt 2  //Int1
  47          {
  48   1              EA = 0;
  49   1                      buff_U27[fine_u27] = uartU27[0];
  50   1                      fine_u27++;
  51   1              EA  = 1;
  52   1      }
  53          /*************************************************************************************/
  54          
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 2   

  55          
  56          
  57          
  58          void uart_reset (void)
  59          {
  60   1              /* si puliscono i registri di controllo dei PIO*/
  61   1              PIO_RESET = 1;
  62   1              for(del =0 ; del<100 ; del++) ;
  63   1              PIO_RESET = 0;
  64   1              printf("\n\nReset uart\n");
  65   1      }
  66          
  67          static void uartU27_init (void)
  68          {
  69   1              uart_reset();
  70   1              /* CND a 1 @8001 */ 
  71   1      //      uartU27 = UART8251_U27_CTRL_ADDR; 
  72   1              printf("conf uart U27 @%04X\n",(unsigned short) uartU27);
  73   1              /* Scrivo il Mode Instruction Register (MIR) = 0x4F*/
  74   1              uartU27[1] = BIN8(
  83   1                                      0       ,//b7 -  s2     s1
  83   1                                      1       ,//b6 -   0  1 -> stop bit 1
  83   1                                      0       ,//b5 -  ep pen
  83   1                                      0       ,//b4 -   0      0 -> none
  83   1                                      1       ,//b3 -  l3 l2
  83   1                                      1       ,//b2 -   1      1 -> 8 bit data
  83   1                                      1       ,//b1 -  b2 b1
  83   1                                      (tipo_scheda==2)         //b0 -   1  1 -> x64
  83   1                                      );
  84   1              printf("1 - uart U27->%02bXH\n", uartU27[1]);
  85   1      
  86   1              /* abilito la trasmissione Control Register (CIR) = 0x35(trasmissione attiva)*/
  87   1              /* abilito la trasmissione Control Register (CIR) = 0x37(ricezione attiva)*/
  88   1              uartU27[1] = BIN8(
  97   1                                      0       ,//b7 - hunt 
  97   1                                      0       ,//b6 - internal reset  
  97   1                                      1       ,//b5 - RTS 
  97   1                                      1       ,//b4 - reset errori
  97   1                                      0       ,//b3 - send break char
  97   1                                      1       ,//b2 - RXen  
  97   1                                      1       ,//b1 - DTR  (0-trasmette   1-riceve)
  97   1                                      1        //b0 - TXen     
  97   1                                      );
  98   1              printf("2 - uart U27->%02bXH\n", uartU27[1]);
  99   1      
 100   1              /* CND a 0 @8000 */ 
 101   1      //    uartU27 = UART8251_U27_DATA_ADDR;
 102   1              printf("3 - uart U27->%02bX\n", uartU27[0]);
 103   1      
 104   1      
 105   1      
 106   1      
 107   1      }
 108          
 109          static void uartU30_init ()
 110          {
 111   1              /* configura la uart come rs485 , seriale asincrona, prescaler 16, 8,N,1*/
 112   1              uart_reset();
 113   1              /* CND a 1 @8001 */ 
 114   1              //uartU30 = UART8251_U30_CTRL_ADDR; 
 115   1              printf("conf uart U30 \n");
 116   1      
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 3   

 117   1              /* Scrivo il Mode Instruction Register (MIR) = 0x4E*/
 118   1              uartU30[1] = BIN8(
 128   1                                      0       ,//b7 -  s2     s1
 128   1                                      1       ,//b6 -   0  1 -> stop bit 1
 128   1                                      0       ,//b5 -  ep pen
 128   1                                      0       ,//b4 -   0      0 -> none
 128   1                                      1       ,//b3 -  l3 l2
 128   1                                      1       ,//b2 -   1      1 -> 8 bit data
 128   1                                      1       ,//b1 -  b2 b1
 128   1                                           /*b0 -       1  0 -> x16  (default per scheda DG630-12)
 128   1                                                    1  1 -> x64  (default per scheda DG630-29) */
 128   1                                      (tipo_scheda==2));
 129   1      //      printf("1 - uart U30->%02bXH\n", uartU30[1]);
 130   1      
 131   1              /* abilito la trasmissione e la ricezione nel
 132   1                 Control Register (CIR) = 0x37*/
 133   1              uartU30[1] = BIN8(
 142   1                                      0       ,//b7 - hunt 
 142   1                                      0       ,//b6 - internal reset  
 142   1                                      1       ,//b5 - RTS 
 142   1                                      1       ,//b4 - reset errori
 142   1                                      0       ,//b3 - send break char
 142   1                                      1       ,//b2 - RXen  
 142   1                                      0       ,//b1 - DTR    (0:trasmissione)
 142   1                                      1        //b0 - TXen     
 142   1                                      );
 143   1      //      printf("2 - uart U30->%02bXH\n", uartU30[1]);
 144   1      
 145   1              /* CND a 0 @8000 */ 
 146   1      //    uartU30 = UART8251_U30_DATA_ADDR;
 147   1      //      printf("3 - uart U30->%04XH   %02bXH\n", (unsigned short)uartU30,uartU30[0]);
 148   1      }
 149          
 150          
 151          
 152          void test_uartU27_rx_tx()
 153          {
 154   1      //      char exit_char;
 155   1      
 156   1              uartU27_init(); 
 157   1      
 158   1              fine_u27 =0;
 159   1      
 160   1              uartU27[1] = 0x35; //abilita la ricezione
 161   1      
 162   1              while (1) 
 163   1              {
 164   2      //              c=getchar();
 165   2      //              if((exit_char=toupper(c))=='Q') return;
 166   2                              DELAY;
 167   2                              DELAY;
 168   2                              DELAY;
 169   2                              DELAY;
 170   2                              DELAY;
 171   2                              DELAY;
 172   2                              DELAY;
 173   2                              DELAY;
 174   2                              DELAY;
 175   2                              DELAY;
 176   2                              DELAY;
 177   2                              DELAY;
 178   2                              DELAY;
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 4   

 179   2                              DELAY;
 180   2                              uartU27[0]= 0x55;
 181   2      /*
 182   2                      if (fine_u27!=0)
 183   2                      {
 184   2                              printf("\nRX (%bd byte): ",fine_u27);
 185   2                              for(i=0; i<fine_u27; i++) printf("%bd:%02bXH  ",i,buff_U27[i]);
 186   2                                      
 187   2                              printf("\n");
 188   2                      }
 189   2      */                      DELAY;
 190   2                              DELAY;
 191   2                              DELAY;
 192   2                              DELAY;
 193   2                              DELAY;
 194   2                              DELAY;
 195   2                              DELAY;
 196   2                              DELAY;
 197   2                              DELAY;
 198   2                              DELAY;
 199   2                              DELAY;
 200   2                              DELAY;
 201   2                              DELAY;
 202   2      //                      uartU27[1] = 0x37; //abilita la trasmissione
 203   2      
 204   2      
 205   2      /*                      printf("\nTX (%bd byte): ",fine_u27);
 206   2                              for(i=0; i<fine_u27; i++) 
 207   2                                      uartU27[0]=buff_U27[i],printf("%bd:%02bXH  ",i,buff_U27[i]);
 208   2      
 209   2                              fine_u27 =0;
 210   2                              printf("\n");
 211   2      */
 212   2                      
 213   2              }
 214   1              
 215   1      
 216   1      }
 217          
 218          
 219          void test_uartU27_ricevi()
 220          {
 221   1      //      char exit_char;
 222   1      
 223   1              uartU27_init(); 
 224   1              DELAY;
 225   1              fine_u27 =0;
 226   1              //abilita la ricezione
 227   1              uartU27[1] = 0x35; 
 228   1              DELAY;
 229   1              while (1) 
 230   1              {
 231   2                      if (fine_u27!=0)
 232   2                      {
 233   3                              printf("\nRicevuti %bd byte : ",fine_u27);
 234   3                              for(i=0; i<fine_u27; i++)
 235   3                                      printf("%02bXH ",buff_U27[i]);
 236   3                              printf("\n");
 237   3                              fine_u27 =0;
 238   3                      }               
 239   2              }
 240   1      }
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 5   

 241          void test_uartU27_trasmetti()
 242          {
 243   1      //      char exit_char;
 244   1      
 245   1              uartU27_init(); 
 246   1              DELAY;
 247   1              //abilita la trasmissione
 248   1              uartU27[1] = 0x37; 
 249   1      
 250   1              DELAY;
 251   1              DELAY;
 252   1              DELAY;
 253   1              DELAY;
 254   1              DELAY;
 255   1              DELAY;
 256   1              DELAY;
 257   1              DELAY;
 258   1              DELAY;
 259   1              DELAY;
 260   1              DELAY;
 261   1              DELAY;
 262   1              DELAY;
 263   1              DELAY;
 264   1              DELAY;
 265   1              DELAY;
 266   1              DELAY;
 267   1              DELAY;
 268   1              DELAY;
 269   1              DELAY;
 270   1              DELAY;
 271   1              DELAY;
 272   1              DELAY;
 273   1              DELAY;
 274   1              DELAY;
 275   1              DELAY;
 276   1              DELAY;
 277   1              DELAY;
 278   1      
 279   1              while (1) 
 280   1              {
 281   2                      //abilita la trasmissione
 282   2      
 283   2      
 284   2                      uartU27[0]=0x55;
 285   2                      printf("\nTX: 0x%02bxH ",0x55);
 286   2      
 287   2                      DELAY;
 288   2                      DELAY;
 289   2                      DELAY;
 290   2                      DELAY;
 291   2                      DELAY;
 292   2                      DELAY;
 293   2                      DELAY;
 294   2                      DELAY;
 295   2                      DELAY;
 296   2                      DELAY;
 297   2                      DELAY;
 298   2                      DELAY;
 299   2                      DELAY;
 300   2                      DELAY;
 301   2                      DELAY;
 302   2              DELAY;
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 6   

 303   2              DELAY;
 304   2              DELAY;
 305   2              DELAY;
 306   2              DELAY;
 307   2              DELAY;
 308   2              DELAY;
 309   2              DELAY;
 310   2              DELAY;
 311   2              DELAY;
 312   2              DELAY;
 313   2              DELAY;
 314   2              DELAY;
 315   2              DELAY;
 316   2                      DELAY;
 317   2              }
 318   1              
 319   1      
 320   1      }
 321          
 322          
 323          void test_uartU30()
 324          {
 325   1      //      static unsigned char err_u30=0;
 326   1              unsigned char i=0;
 327   1              char exit_char;
 328   1              printf("\nPremere un tasto e verificare che corrisponda a quello ricevuto (q per uscire)\n");
 329   1              uartU30_init(); 
 330   1              fine_u30 =0;
 331   1              while (1) 
 332   1              {
 333   2                      c=getchar();
 334   2                      if((exit_char=toupper(c))=='Q') break;
 335   2                      if (TXE_U30 ) 
 336   2                      {
 337   3                              /*uartU30[1]= 0x35; // in trasmissione
 338   3                              DELAY;
 339   3                              DELAY;
 340   3                              DELAY;
 341   3                              DELAY;
 342   3                              DELAY;
 343   3                              DELAY;
 344   3      
 345   3                               */
 346   3                              uartU30[0] = c;
 347   3                              printf("\nTX:%c(%02bxH)  ",c,c);
 348   3                      }
 349   2      
 350   2                      if (fine_u30!=0)
 351   2                      {
 352   3                              printf("  RX (%bd byte):",fine_u30);
 353   3                              for(i=0; i<fine_u30; i++)
 354   3                              {
 355   4                                      printf("% 02bx ",buff_U30[i]);
 356   4                                      //if (c!= buff_U30[i]) err_u30++;
 357   4                              }
 358   3                              printf("\n\n");
 359   3                              fine_u30 = 0;
 360   3                      }
 361   2              }
 362   1              printf("\n");
 363   1      /*      if (err_u30) 
 364   1                      printf("Test UART U30 KO ,errori rx %bd/255",err_u30);
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 7   

 365   1              else 
 366   1                      printf("Test UART U30 OK ,errori rx %bd/255",err_u30);
 367   1      */
 368   1      }
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 8   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION RX_RDY_U30_isr (BEGIN)
0000 C0E0              PUSH    ACC
0002 C083              PUSH    DPH
0004 C082              PUSH    DPL
0006 C0D0              PUSH    PSW
0008 75D000            MOV     PSW,#00H
000B C006              PUSH    AR6
000D C007              PUSH    AR7
                                           ; SOURCE LINE # 39
                                           ; SOURCE LINE # 41
000F C2AF              CLR     EA
                                           ; SOURCE LINE # 42
0011 908000            MOV     DPTR,#uartU30
0014 E0                MOVX    A,@DPTR
0015 FF                MOV     R7,A
0016 AE00        R     MOV     R6,fine_u30
0018 0500        R     INC     fine_u30
001A 7400        R     MOV     A,#LOW buff_U30
001C 2E                ADD     A,R6
001D F582              MOV     DPL,A
001F E4                CLR     A
0020 3400        R     ADDC    A,#HIGH buff_U30
0022 F583              MOV     DPH,A
0024 EF                MOV     A,R7
0025 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 43
0026 D2AF              SETB    EA
                                           ; SOURCE LINE # 44
0028 D007              POP     AR7
002A D006              POP     AR6
002C D0D0              POP     PSW
002E D082              POP     DPL
0030 D083              POP     DPH
0032 D0E0              POP     ACC
0034 32                RETI    
             ; FUNCTION RX_RDY_U30_isr (END)

             ; FUNCTION RX_RDY_U27_isr (BEGIN)
0000 C0E0              PUSH    ACC
0002 C083              PUSH    DPH
0004 C082              PUSH    DPL
0006 C0D0              PUSH    PSW
0008 75D000            MOV     PSW,#00H
000B C007              PUSH    AR7
                                           ; SOURCE LINE # 46
                                           ; SOURCE LINE # 48
000D C2AF              CLR     EA
                                           ; SOURCE LINE # 49
000F 906000            MOV     DPTR,#uartU27
0012 E0                MOVX    A,@DPTR
0013 FF                MOV     R7,A
0014 7400        R     MOV     A,#LOW buff_U27
0016 2500        R     ADD     A,fine_u27
0018 F582              MOV     DPL,A
001A E4                CLR     A
001B 3400        R     ADDC    A,#HIGH buff_U27
001D F583              MOV     DPH,A
001F EF                MOV     A,R7
0020 F0                MOVX    @DPTR,A
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 9   

                                           ; SOURCE LINE # 50
0021 0500        R     INC     fine_u27
                                           ; SOURCE LINE # 51
0023 D2AF              SETB    EA
                                           ; SOURCE LINE # 52
0025 D007              POP     AR7
0027 D0D0              POP     PSW
0029 D082              POP     DPL
002B D083              POP     DPH
002D D0E0              POP     ACC
002F 32                RETI    
             ; FUNCTION RX_RDY_U27_isr (END)

             ; FUNCTION uart_reset (BEGIN)
                                           ; SOURCE LINE # 58
                                           ; SOURCE LINE # 59
                                           ; SOURCE LINE # 61
0000 D297              SETB    PIO_RESET
                                           ; SOURCE LINE # 62
0002 E4                CLR     A
0003 F500        E     MOV     del,A
0005         ?C0003:
0005 0500        E     INC     del
0007 E500        E     MOV     A,del
0009 B464F9            CJNE    A,#064H,?C0003
000C         ?C0004:
                                           ; SOURCE LINE # 63
000C C297              CLR     PIO_RESET
                                           ; SOURCE LINE # 64
000E 7BFF              MOV     R3,#0FFH
0010 7A00        R     MOV     R2,#HIGH ?SC_0
0012 7900        R     MOV     R1,#LOW ?SC_0
0014 020000      E     LJMP    _printf
             ; FUNCTION uart_reset (END)

             ; FUNCTION uartU27_init (BEGIN)
                                           ; SOURCE LINE # 67
                                           ; SOURCE LINE # 68
                                           ; SOURCE LINE # 69
0000 120000      R     LCALL   uart_reset
                                           ; SOURCE LINE # 72
0003 7E60              MOV     R6,#HIGH uartU27
0005 7F00              MOV     R7,#LOW uartU27
0007 750060      E     MOV     ?_printf?BYTE+03H,#HIGH uartU27
000A 750000      E     MOV     ?_printf?BYTE+04H,#LOW uartU27
000D 7BFF              MOV     R3,#0FFH
000F 7A00        R     MOV     R2,#HIGH ?SC_14
0011 7900        R     MOV     R1,#LOW ?SC_14
0013 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 74
0016 E500        E     MOV     A,tipo_scheda
0018 B40204            CJNE    A,#02H,?C0007
001B 7F01              MOV     R7,#01H
001D 8002              SJMP    ?C0008
001F         ?C0007:
001F 7F00              MOV     R7,#00H
0021         ?C0008:
0021 EF                MOV     A,R7
0022 444E              ORL     A,#04EH
0024 906001            MOV     DPTR,#uartU27+01H
0027 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 84
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 10  

0028 7BFF              MOV     R3,#0FFH
002A 7A00        R     MOV     R2,#HIGH ?SC_35
002C 7900        R     MOV     R1,#LOW ?SC_35
002E E0                MOVX    A,@DPTR
002F F500        E     MOV     ?_printf?BYTE+03H,A
0031 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 88
0034 906001            MOV     DPTR,#uartU27+01H
0037 7437              MOV     A,#037H
0039 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 98
003A 7BFF              MOV     R3,#0FFH
003C 7A00        R     MOV     R2,#HIGH ?SC_57
003E 7900        R     MOV     R1,#LOW ?SC_57
0040 E0                MOVX    A,@DPTR
0041 F500        E     MOV     ?_printf?BYTE+03H,A
0043 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 102
0046 7BFF              MOV     R3,#0FFH
0048 7A00        R     MOV     R2,#HIGH ?SC_79
004A 7900        R     MOV     R1,#LOW ?SC_79
004C 906000            MOV     DPTR,#uartU27
004F E0                MOVX    A,@DPTR
0050 F500        E     MOV     ?_printf?BYTE+03H,A
0052 020000      E     LJMP    _printf
             ; FUNCTION uartU27_init (END)

             ; FUNCTION uartU30_init (BEGIN)
                                           ; SOURCE LINE # 109
                                           ; SOURCE LINE # 110
                                           ; SOURCE LINE # 112
0000 120000      R     LCALL   uart_reset
                                           ; SOURCE LINE # 115
0003 7BFF              MOV     R3,#0FFH
0005 7A00        R     MOV     R2,#HIGH ?SC_100
0007 7900        R     MOV     R1,#LOW ?SC_100
0009 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 118
000C E500        E     MOV     A,tipo_scheda
000E B40204            CJNE    A,#02H,?C0010
0011 7F01              MOV     R7,#01H
0013 8002              SJMP    ?C0011
0015         ?C0010:
0015 7F00              MOV     R7,#00H
0017         ?C0011:
0017 EF                MOV     A,R7
0018 444E              ORL     A,#04EH
001A 908001            MOV     DPTR,#uartU30+01H
001D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 133
001E 7435              MOV     A,#035H
0020 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 148
0021 22                RET     
             ; FUNCTION uartU30_init (END)

             ; FUNCTION test_uartU27_rx_tx (BEGIN)
                                           ; SOURCE LINE # 152
                                           ; SOURCE LINE # 153
                                           ; SOURCE LINE # 156
0000 120000      R     LCALL   uartU27_init
                                           ; SOURCE LINE # 158
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 11  

0003 E4                CLR     A
0004 F500        R     MOV     fine_u27,A
                                           ; SOURCE LINE # 160
0006 906001            MOV     DPTR,#uartU27+01H
0009 7435              MOV     A,#035H
000B F0                MOVX    @DPTR,A
000C         ?C0013:
                                           ; SOURCE LINE # 162
                                           ; SOURCE LINE # 163
                                           ; SOURCE LINE # 166
000C E4                CLR     A
000D F500        E     MOV     del,A
000F         ?C0015:
000F 0500        E     INC     del
0011 E500        E     MOV     A,del
0013 B4C8F9            CJNE    A,#0C8H,?C0015
0016         ?C0016:
                                           ; SOURCE LINE # 167
0016 E4                CLR     A
0017 F500        E     MOV     del,A
0019         ?C0018:
0019 0500        E     INC     del
001B E500        E     MOV     A,del
001D B4C8F9            CJNE    A,#0C8H,?C0018
0020         ?C0019:
                                           ; SOURCE LINE # 168
0020 E4                CLR     A
0021 F500        E     MOV     del,A
0023         ?C0021:
0023 0500        E     INC     del
0025 E500        E     MOV     A,del
0027 B4C8F9            CJNE    A,#0C8H,?C0021
002A         ?C0022:
                                           ; SOURCE LINE # 169
002A E4                CLR     A
002B F500        E     MOV     del,A
002D         ?C0024:
002D 0500        E     INC     del
002F E500        E     MOV     A,del
0031 B4C8F9            CJNE    A,#0C8H,?C0024
0034         ?C0025:
                                           ; SOURCE LINE # 170
0034 E4                CLR     A
0035 F500        E     MOV     del,A
0037         ?C0027:
0037 0500        E     INC     del
0039 E500        E     MOV     A,del
003B B4C8F9            CJNE    A,#0C8H,?C0027
003E         ?C0028:
                                           ; SOURCE LINE # 171
003E E4                CLR     A
003F F500        E     MOV     del,A
0041         ?C0030:
0041 0500        E     INC     del
0043 E500        E     MOV     A,del
0045 B4C8F9            CJNE    A,#0C8H,?C0030
0048         ?C0031:
                                           ; SOURCE LINE # 172
0048 E4                CLR     A
0049 F500        E     MOV     del,A
004B         ?C0033:
004B 0500        E     INC     del
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 12  

004D E500        E     MOV     A,del
004F B4C8F9            CJNE    A,#0C8H,?C0033
0052         ?C0034:
                                           ; SOURCE LINE # 173
0052 E4                CLR     A
0053 F500        E     MOV     del,A
0055         ?C0036:
0055 0500        E     INC     del
0057 E500        E     MOV     A,del
0059 B4C8F9            CJNE    A,#0C8H,?C0036
005C         ?C0037:
                                           ; SOURCE LINE # 174
005C E4                CLR     A
005D F500        E     MOV     del,A
005F         ?C0039:
005F 0500        E     INC     del
0061 E500        E     MOV     A,del
0063 B4C8F9            CJNE    A,#0C8H,?C0039
0066         ?C0040:
                                           ; SOURCE LINE # 175
0066 E4                CLR     A
0067 F500        E     MOV     del,A
0069         ?C0042:
0069 0500        E     INC     del
006B E500        E     MOV     A,del
006D B4C8F9            CJNE    A,#0C8H,?C0042
0070         ?C0043:
                                           ; SOURCE LINE # 176
0070 E4                CLR     A
0071 F500        E     MOV     del,A
0073         ?C0045:
0073 0500        E     INC     del
0075 E500        E     MOV     A,del
0077 B4C8F9            CJNE    A,#0C8H,?C0045
007A         ?C0046:
                                           ; SOURCE LINE # 177
007A E4                CLR     A
007B F500        E     MOV     del,A
007D         ?C0048:
007D 0500        E     INC     del
007F E500        E     MOV     A,del
0081 B4C8F9            CJNE    A,#0C8H,?C0048
0084         ?C0049:
                                           ; SOURCE LINE # 178
0084 E4                CLR     A
0085 F500        E     MOV     del,A
0087         ?C0051:
0087 0500        E     INC     del
0089 E500        E     MOV     A,del
008B B4C8F9            CJNE    A,#0C8H,?C0051
008E         ?C0052:
                                           ; SOURCE LINE # 179
008E E4                CLR     A
008F F500        E     MOV     del,A
0091         ?C0054:
0091 0500        E     INC     del
0093 E500        E     MOV     A,del
0095 B4C8F9            CJNE    A,#0C8H,?C0054
0098         ?C0055:
                                           ; SOURCE LINE # 180
0098 906000            MOV     DPTR,#uartU27
009B 7455              MOV     A,#055H
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 13  

009D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 189
009E E4                CLR     A
009F F500        E     MOV     del,A
00A1         ?C0057:
00A1 0500        E     INC     del
00A3 E500        E     MOV     A,del
00A5 B4C8F9            CJNE    A,#0C8H,?C0057
00A8         ?C0058:
                                           ; SOURCE LINE # 190
00A8 E4                CLR     A
00A9 F500        E     MOV     del,A
00AB         ?C0060:
00AB 0500        E     INC     del
00AD E500        E     MOV     A,del
00AF B4C8F9            CJNE    A,#0C8H,?C0060
00B2         ?C0061:
                                           ; SOURCE LINE # 191
00B2 E4                CLR     A
00B3 F500        E     MOV     del,A
00B5         ?C0063:
00B5 0500        E     INC     del
00B7 E500        E     MOV     A,del
00B9 B4C8F9            CJNE    A,#0C8H,?C0063
00BC         ?C0064:
                                           ; SOURCE LINE # 192
00BC E4                CLR     A
00BD F500        E     MOV     del,A
00BF         ?C0066:
00BF 0500        E     INC     del
00C1 E500        E     MOV     A,del
00C3 B4C8F9            CJNE    A,#0C8H,?C0066
00C6         ?C0067:
                                           ; SOURCE LINE # 193
00C6 E4                CLR     A
00C7 F500        E     MOV     del,A
00C9         ?C0069:
00C9 0500        E     INC     del
00CB E500        E     MOV     A,del
00CD B4C8F9            CJNE    A,#0C8H,?C0069
00D0         ?C0070:
                                           ; SOURCE LINE # 194
00D0 E4                CLR     A
00D1 F500        E     MOV     del,A
00D3         ?C0072:
00D3 0500        E     INC     del
00D5 E500        E     MOV     A,del
00D7 B4C8F9            CJNE    A,#0C8H,?C0072
00DA         ?C0073:
                                           ; SOURCE LINE # 195
00DA E4                CLR     A
00DB F500        E     MOV     del,A
00DD         ?C0075:
00DD 0500        E     INC     del
00DF E500        E     MOV     A,del
00E1 B4C8F9            CJNE    A,#0C8H,?C0075
00E4         ?C0076:
                                           ; SOURCE LINE # 196
00E4 E4                CLR     A
00E5 F500        E     MOV     del,A
00E7         ?C0078:
00E7 0500        E     INC     del
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 14  

00E9 E500        E     MOV     A,del
00EB B4C8F9            CJNE    A,#0C8H,?C0078
00EE         ?C0079:
                                           ; SOURCE LINE # 197
00EE E4                CLR     A
00EF F500        E     MOV     del,A
00F1         ?C0081:
00F1 0500        E     INC     del
00F3 E500        E     MOV     A,del
00F5 B4C8F9            CJNE    A,#0C8H,?C0081
00F8         ?C0082:
                                           ; SOURCE LINE # 198
00F8 E4                CLR     A
00F9 F500        E     MOV     del,A
00FB         ?C0084:
00FB 0500        E     INC     del
00FD E500        E     MOV     A,del
00FF B4C8F9            CJNE    A,#0C8H,?C0084
0102         ?C0085:
                                           ; SOURCE LINE # 199
0102 E4                CLR     A
0103 F500        E     MOV     del,A
0105         ?C0087:
0105 0500        E     INC     del
0107 E500        E     MOV     A,del
0109 B4C8F9            CJNE    A,#0C8H,?C0087
010C         ?C0088:
                                           ; SOURCE LINE # 200
010C E4                CLR     A
010D F500        E     MOV     del,A
010F         ?C0090:
010F 0500        E     INC     del
0111 E500        E     MOV     A,del
0113 B4C8F9            CJNE    A,#0C8H,?C0090
0116         ?C0091:
                                           ; SOURCE LINE # 201
0116 E4                CLR     A
0117 F500        E     MOV     del,A
0119         ?C0093:
0119 E500        E     MOV     A,del
011B C3                CLR     C
011C 94C8              SUBB    A,#0C8H
011E 4003              JC      $ + 5H
0120 020000      R     LJMP    ?C0013
0123 0500        E     INC     del
0125 80F2              SJMP    ?C0093
             ; FUNCTION test_uartU27_rx_tx (END)

             ; FUNCTION test_uartU27_ricevi (BEGIN)
                                           ; SOURCE LINE # 219
                                           ; SOURCE LINE # 220
                                           ; SOURCE LINE # 223
0000 120000      R     LCALL   uartU27_init
                                           ; SOURCE LINE # 224
0003 E4                CLR     A
0004 F500        E     MOV     del,A
0006         ?C0097:
0006 0500        E     INC     del
0008 E500        E     MOV     A,del
000A B4C8F9            CJNE    A,#0C8H,?C0097
000D         ?C0098:
                                           ; SOURCE LINE # 225
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 15  

000D E4                CLR     A
000E F500        R     MOV     fine_u27,A
                                           ; SOURCE LINE # 227
0010 906001            MOV     DPTR,#uartU27+01H
0013 7435              MOV     A,#035H
0015 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 228
0016 E4                CLR     A
0017 F500        E     MOV     del,A
0019         ?C0100:
0019 0500        E     INC     del
001B E500        E     MOV     A,del
001D B4C8F9            CJNE    A,#0C8H,?C0100
0020         ?C0103:
                                           ; SOURCE LINE # 229
                                           ; SOURCE LINE # 230
                                           ; SOURCE LINE # 231
0020 E500        R     MOV     A,fine_u27
0022 60FC              JZ      ?C0103
                                           ; SOURCE LINE # 232
                                           ; SOURCE LINE # 233
0024 7BFF              MOV     R3,#0FFH
0026 7A00        R     MOV     R2,#HIGH ?SC_116
0028 7900        R     MOV     R1,#LOW ?SC_116
002A F500        E     MOV     ?_printf?BYTE+03H,A
002C 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 234
002F E4                CLR     A
0030 F500        R     MOV     i,A
0032         ?C0106:
0032 E500        R     MOV     A,i
0034 C3                CLR     C
0035 9500        R     SUBB    A,fine_u27
0037 501B              JNC     ?C0107
                                           ; SOURCE LINE # 235
0039 7BFF              MOV     R3,#0FFH
003B 7A00        R     MOV     R2,#HIGH ?SC_138
003D 7900        R     MOV     R1,#LOW ?SC_138
003F 7400        R     MOV     A,#LOW buff_U27
0041 2500        R     ADD     A,i
0043 F582              MOV     DPL,A
0045 E4                CLR     A
0046 3400        R     ADDC    A,#HIGH buff_U27
0048 F583              MOV     DPH,A
004A E0                MOVX    A,@DPTR
004B F500        E     MOV     ?_printf?BYTE+03H,A
004D 120000      E     LCALL   _printf
0050 0500        R     INC     i
0052 80DE              SJMP    ?C0106
0054         ?C0107:
                                           ; SOURCE LINE # 236
0054 7BFF              MOV     R3,#0FFH
0056 7A00        R     MOV     R2,#HIGH ?SC_146
0058 7900        R     MOV     R1,#LOW ?SC_146
005A 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 237
005D E4                CLR     A
005E F500        R     MOV     fine_u27,A
                                           ; SOURCE LINE # 238
                                           ; SOURCE LINE # 239
0060 80BE              SJMP    ?C0103
             ; FUNCTION test_uartU27_ricevi (END)
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 16  


             ; FUNCTION test_uartU27_trasmetti (BEGIN)
                                           ; SOURCE LINE # 241
                                           ; SOURCE LINE # 242
                                           ; SOURCE LINE # 245
0000 120000      R     LCALL   uartU27_init
                                           ; SOURCE LINE # 246
0003 E4                CLR     A
0004 F500        E     MOV     del,A
0006         ?C0110:
0006 0500        E     INC     del
0008 E500        E     MOV     A,del
000A B4C8F9            CJNE    A,#0C8H,?C0110
000D         ?C0111:
                                           ; SOURCE LINE # 248
000D 906001            MOV     DPTR,#uartU27+01H
0010 7437              MOV     A,#037H
0012 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 250
0013 E4                CLR     A
0014 F500        E     MOV     del,A
0016         ?C0113:
0016 0500        E     INC     del
0018 E500        E     MOV     A,del
001A B4C8F9            CJNE    A,#0C8H,?C0113
001D         ?C0114:
                                           ; SOURCE LINE # 251
001D E4                CLR     A
001E F500        E     MOV     del,A
0020         ?C0116:
0020 0500        E     INC     del
0022 E500        E     MOV     A,del
0024 B4C8F9            CJNE    A,#0C8H,?C0116
0027         ?C0117:
                                           ; SOURCE LINE # 252
0027 E4                CLR     A
0028 F500        E     MOV     del,A
002A         ?C0119:
002A 0500        E     INC     del
002C E500        E     MOV     A,del
002E B4C8F9            CJNE    A,#0C8H,?C0119
0031         ?C0120:
                                           ; SOURCE LINE # 253
0031 E4                CLR     A
0032 F500        E     MOV     del,A
0034         ?C0122:
0034 0500        E     INC     del
0036 E500        E     MOV     A,del
0038 B4C8F9            CJNE    A,#0C8H,?C0122
003B         ?C0123:
                                           ; SOURCE LINE # 254
003B E4                CLR     A
003C F500        E     MOV     del,A
003E         ?C0125:
003E 0500        E     INC     del
0040 E500        E     MOV     A,del
0042 B4C8F9            CJNE    A,#0C8H,?C0125
0045         ?C0126:
                                           ; SOURCE LINE # 255
0045 E4                CLR     A
0046 F500        E     MOV     del,A
0048         ?C0128:
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 17  

0048 0500        E     INC     del
004A E500        E     MOV     A,del
004C B4C8F9            CJNE    A,#0C8H,?C0128
004F         ?C0129:
                                           ; SOURCE LINE # 256
004F E4                CLR     A
0050 F500        E     MOV     del,A
0052         ?C0131:
0052 0500        E     INC     del
0054 E500        E     MOV     A,del
0056 B4C8F9            CJNE    A,#0C8H,?C0131
0059         ?C0132:
                                           ; SOURCE LINE # 257
0059 E4                CLR     A
005A F500        E     MOV     del,A
005C         ?C0134:
005C 0500        E     INC     del
005E E500        E     MOV     A,del
0060 B4C8F9            CJNE    A,#0C8H,?C0134
0063         ?C0135:
                                           ; SOURCE LINE # 258
0063 E4                CLR     A
0064 F500        E     MOV     del,A
0066         ?C0137:
0066 0500        E     INC     del
0068 E500        E     MOV     A,del
006A B4C8F9            CJNE    A,#0C8H,?C0137
006D         ?C0138:
                                           ; SOURCE LINE # 259
006D E4                CLR     A
006E F500        E     MOV     del,A
0070         ?C0140:
0070 0500        E     INC     del
0072 E500        E     MOV     A,del
0074 B4C8F9            CJNE    A,#0C8H,?C0140
0077         ?C0141:
                                           ; SOURCE LINE # 260
0077 E4                CLR     A
0078 F500        E     MOV     del,A
007A         ?C0143:
007A 0500        E     INC     del
007C E500        E     MOV     A,del
007E B4C8F9            CJNE    A,#0C8H,?C0143
0081         ?C0144:
                                           ; SOURCE LINE # 261
0081 E4                CLR     A
0082 F500        E     MOV     del,A
0084         ?C0146:
0084 0500        E     INC     del
0086 E500        E     MOV     A,del
0088 B4C8F9            CJNE    A,#0C8H,?C0146
008B         ?C0147:
                                           ; SOURCE LINE # 262
008B E4                CLR     A
008C F500        E     MOV     del,A
008E         ?C0149:
008E 0500        E     INC     del
0090 E500        E     MOV     A,del
0092 B4C8F9            CJNE    A,#0C8H,?C0149
0095         ?C0150:
                                           ; SOURCE LINE # 263
0095 E4                CLR     A
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 18  

0096 F500        E     MOV     del,A
0098         ?C0152:
0098 0500        E     INC     del
009A E500        E     MOV     A,del
009C B4C8F9            CJNE    A,#0C8H,?C0152
009F         ?C0153:
                                           ; SOURCE LINE # 264
009F E4                CLR     A
00A0 F500        E     MOV     del,A
00A2         ?C0155:
00A2 0500        E     INC     del
00A4 E500        E     MOV     A,del
00A6 B4C8F9            CJNE    A,#0C8H,?C0155
00A9         ?C0156:
                                           ; SOURCE LINE # 265
00A9 E4                CLR     A
00AA F500        E     MOV     del,A
00AC         ?C0158:
00AC 0500        E     INC     del
00AE E500        E     MOV     A,del
00B0 B4C8F9            CJNE    A,#0C8H,?C0158
00B3         ?C0159:
                                           ; SOURCE LINE # 266
00B3 E4                CLR     A
00B4 F500        E     MOV     del,A
00B6         ?C0161:
00B6 0500        E     INC     del
00B8 E500        E     MOV     A,del
00BA B4C8F9            CJNE    A,#0C8H,?C0161
00BD         ?C0162:
                                           ; SOURCE LINE # 267
00BD E4                CLR     A
00BE F500        E     MOV     del,A
00C0         ?C0164:
00C0 0500        E     INC     del
00C2 E500        E     MOV     A,del
00C4 B4C8F9            CJNE    A,#0C8H,?C0164
00C7         ?C0165:
                                           ; SOURCE LINE # 268
00C7 E4                CLR     A
00C8 F500        E     MOV     del,A
00CA         ?C0167:
00CA 0500        E     INC     del
00CC E500        E     MOV     A,del
00CE B4C8F9            CJNE    A,#0C8H,?C0167
00D1         ?C0168:
                                           ; SOURCE LINE # 269
00D1 E4                CLR     A
00D2 F500        E     MOV     del,A
00D4         ?C0170:
00D4 0500        E     INC     del
00D6 E500        E     MOV     A,del
00D8 B4C8F9            CJNE    A,#0C8H,?C0170
00DB         ?C0171:
                                           ; SOURCE LINE # 270
00DB E4                CLR     A
00DC F500        E     MOV     del,A
00DE         ?C0173:
00DE 0500        E     INC     del
00E0 E500        E     MOV     A,del
00E2 B4C8F9            CJNE    A,#0C8H,?C0173
00E5         ?C0174:
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 19  

                                           ; SOURCE LINE # 271
00E5 E4                CLR     A
00E6 F500        E     MOV     del,A
00E8         ?C0176:
00E8 0500        E     INC     del
00EA E500        E     MOV     A,del
00EC B4C8F9            CJNE    A,#0C8H,?C0176
00EF         ?C0177:
                                           ; SOURCE LINE # 272
00EF E4                CLR     A
00F0 F500        E     MOV     del,A
00F2         ?C0179:
00F2 0500        E     INC     del
00F4 E500        E     MOV     A,del
00F6 B4C8F9            CJNE    A,#0C8H,?C0179
00F9         ?C0180:
                                           ; SOURCE LINE # 273
00F9 E4                CLR     A
00FA F500        E     MOV     del,A
00FC         ?C0182:
00FC 0500        E     INC     del
00FE E500        E     MOV     A,del
0100 B4C8F9            CJNE    A,#0C8H,?C0182
0103         ?C0183:
                                           ; SOURCE LINE # 274
0103 E4                CLR     A
0104 F500        E     MOV     del,A
0106         ?C0185:
0106 0500        E     INC     del
0108 E500        E     MOV     A,del
010A B4C8F9            CJNE    A,#0C8H,?C0185
010D         ?C0186:
                                           ; SOURCE LINE # 275
010D E4                CLR     A
010E F500        E     MOV     del,A
0110         ?C0188:
0110 0500        E     INC     del
0112 E500        E     MOV     A,del
0114 B4C8F9            CJNE    A,#0C8H,?C0188
0117         ?C0189:
                                           ; SOURCE LINE # 276
0117 E4                CLR     A
0118 F500        E     MOV     del,A
011A         ?C0191:
011A 0500        E     INC     del
011C E500        E     MOV     A,del
011E B4C8F9            CJNE    A,#0C8H,?C0191
0121         ?C0192:
                                           ; SOURCE LINE # 277
0121 E4                CLR     A
0122 F500        E     MOV     del,A
0124         ?C0194:
0124 0500        E     INC     del
0126 E500        E     MOV     A,del
0128 B4C8F9            CJNE    A,#0C8H,?C0194
012B         ?C0197:
                                           ; SOURCE LINE # 279
                                           ; SOURCE LINE # 280
                                           ; SOURCE LINE # 284
012B 906000            MOV     DPTR,#uartU27
012E 7455              MOV     A,#055H
0130 F0                MOVX    @DPTR,A
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 20  

                                           ; SOURCE LINE # 285
0131 7BFF              MOV     R3,#0FFH
0133 7A00        R     MOV     R2,#HIGH ?SC_148
0135 7900        R     MOV     R1,#LOW ?SC_148
0137 F500        E     MOV     ?_printf?BYTE+03H,A
0139 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 287
013C E4                CLR     A
013D F500        E     MOV     del,A
013F         ?C0199:
013F 0500        E     INC     del
0141 E500        E     MOV     A,del
0143 B4C8F9            CJNE    A,#0C8H,?C0199
0146         ?C0200:
                                           ; SOURCE LINE # 288
0146 E4                CLR     A
0147 F500        E     MOV     del,A
0149         ?C0202:
0149 0500        E     INC     del
014B E500        E     MOV     A,del
014D B4C8F9            CJNE    A,#0C8H,?C0202
0150         ?C0203:
                                           ; SOURCE LINE # 289
0150 E4                CLR     A
0151 F500        E     MOV     del,A
0153         ?C0205:
0153 0500        E     INC     del
0155 E500        E     MOV     A,del
0157 B4C8F9            CJNE    A,#0C8H,?C0205
015A         ?C0206:
                                           ; SOURCE LINE # 290
015A E4                CLR     A
015B F500        E     MOV     del,A
015D         ?C0208:
015D 0500        E     INC     del
015F E500        E     MOV     A,del
0161 B4C8F9            CJNE    A,#0C8H,?C0208
0164         ?C0209:
                                           ; SOURCE LINE # 291
0164 E4                CLR     A
0165 F500        E     MOV     del,A
0167         ?C0211:
0167 0500        E     INC     del
0169 E500        E     MOV     A,del
016B B4C8F9            CJNE    A,#0C8H,?C0211
016E         ?C0212:
                                           ; SOURCE LINE # 292
016E E4                CLR     A
016F F500        E     MOV     del,A
0171         ?C0214:
0171 0500        E     INC     del
0173 E500        E     MOV     A,del
0175 B4C8F9            CJNE    A,#0C8H,?C0214
0178         ?C0215:
                                           ; SOURCE LINE # 293
0178 E4                CLR     A
0179 F500        E     MOV     del,A
017B         ?C0217:
017B 0500        E     INC     del
017D E500        E     MOV     A,del
017F B4C8F9            CJNE    A,#0C8H,?C0217
0182         ?C0218:
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 21  

                                           ; SOURCE LINE # 294
0182 E4                CLR     A
0183 F500        E     MOV     del,A
0185         ?C0220:
0185 0500        E     INC     del
0187 E500        E     MOV     A,del
0189 B4C8F9            CJNE    A,#0C8H,?C0220
018C         ?C0221:
                                           ; SOURCE LINE # 295
018C E4                CLR     A
018D F500        E     MOV     del,A
018F         ?C0223:
018F 0500        E     INC     del
0191 E500        E     MOV     A,del
0193 B4C8F9            CJNE    A,#0C8H,?C0223
0196         ?C0224:
                                           ; SOURCE LINE # 296
0196 E4                CLR     A
0197 F500        E     MOV     del,A
0199         ?C0226:
0199 0500        E     INC     del
019B E500        E     MOV     A,del
019D B4C8F9            CJNE    A,#0C8H,?C0226
01A0         ?C0227:
                                           ; SOURCE LINE # 297
01A0 E4                CLR     A
01A1 F500        E     MOV     del,A
01A3         ?C0229:
01A3 0500        E     INC     del
01A5 E500        E     MOV     A,del
01A7 B4C8F9            CJNE    A,#0C8H,?C0229
01AA         ?C0230:
                                           ; SOURCE LINE # 298
01AA E4                CLR     A
01AB F500        E     MOV     del,A
01AD         ?C0232:
01AD 0500        E     INC     del
01AF E500        E     MOV     A,del
01B1 B4C8F9            CJNE    A,#0C8H,?C0232
01B4         ?C0233:
                                           ; SOURCE LINE # 299
01B4 E4                CLR     A
01B5 F500        E     MOV     del,A
01B7         ?C0235:
01B7 0500        E     INC     del
01B9 E500        E     MOV     A,del
01BB B4C8F9            CJNE    A,#0C8H,?C0235
01BE         ?C0236:
                                           ; SOURCE LINE # 300
01BE E4                CLR     A
01BF F500        E     MOV     del,A
01C1         ?C0238:
01C1 0500        E     INC     del
01C3 E500        E     MOV     A,del
01C5 B4C8F9            CJNE    A,#0C8H,?C0238
01C8         ?C0239:
                                           ; SOURCE LINE # 301
01C8 E4                CLR     A
01C9 F500        E     MOV     del,A
01CB         ?C0241:
01CB 0500        E     INC     del
01CD E500        E     MOV     A,del
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 22  

01CF B4C8F9            CJNE    A,#0C8H,?C0241
01D2         ?C0242:
                                           ; SOURCE LINE # 302
01D2 E4                CLR     A
01D3 F500        E     MOV     del,A
01D5         ?C0244:
01D5 0500        E     INC     del
01D7 E500        E     MOV     A,del
01D9 B4C8F9            CJNE    A,#0C8H,?C0244
01DC         ?C0245:
                                           ; SOURCE LINE # 303
01DC E4                CLR     A
01DD F500        E     MOV     del,A
01DF         ?C0247:
01DF 0500        E     INC     del
01E1 E500        E     MOV     A,del
01E3 B4C8F9            CJNE    A,#0C8H,?C0247
01E6         ?C0248:
                                           ; SOURCE LINE # 304
01E6 E4                CLR     A
01E7 F500        E     MOV     del,A
01E9         ?C0250:
01E9 0500        E     INC     del
01EB E500        E     MOV     A,del
01ED B4C8F9            CJNE    A,#0C8H,?C0250
01F0         ?C0251:
                                           ; SOURCE LINE # 305
01F0 E4                CLR     A
01F1 F500        E     MOV     del,A
01F3         ?C0253:
01F3 0500        E     INC     del
01F5 E500        E     MOV     A,del
01F7 B4C8F9            CJNE    A,#0C8H,?C0253
01FA         ?C0254:
                                           ; SOURCE LINE # 306
01FA E4                CLR     A
01FB F500        E     MOV     del,A
01FD         ?C0256:
01FD 0500        E     INC     del
01FF E500        E     MOV     A,del
0201 B4C8F9            CJNE    A,#0C8H,?C0256
0204         ?C0257:
                                           ; SOURCE LINE # 307
0204 E4                CLR     A
0205 F500        E     MOV     del,A
0207         ?C0259:
0207 0500        E     INC     del
0209 E500        E     MOV     A,del
020B B4C8F9            CJNE    A,#0C8H,?C0259
020E         ?C0260:
                                           ; SOURCE LINE # 308
020E E4                CLR     A
020F F500        E     MOV     del,A
0211         ?C0262:
0211 0500        E     INC     del
0213 E500        E     MOV     A,del
0215 B4C8F9            CJNE    A,#0C8H,?C0262
0218         ?C0263:
                                           ; SOURCE LINE # 309
0218 E4                CLR     A
0219 F500        E     MOV     del,A
021B         ?C0265:
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 23  

021B 0500        E     INC     del
021D E500        E     MOV     A,del
021F B4C8F9            CJNE    A,#0C8H,?C0265
0222         ?C0266:
                                           ; SOURCE LINE # 310
0222 E4                CLR     A
0223 F500        E     MOV     del,A
0225         ?C0268:
0225 0500        E     INC     del
0227 E500        E     MOV     A,del
0229 B4C8F9            CJNE    A,#0C8H,?C0268
022C         ?C0269:
                                           ; SOURCE LINE # 311
022C E4                CLR     A
022D F500        E     MOV     del,A
022F         ?C0271:
022F 0500        E     INC     del
0231 E500        E     MOV     A,del
0233 B4C8F9            CJNE    A,#0C8H,?C0271
0236         ?C0272:
                                           ; SOURCE LINE # 312
0236 E4                CLR     A
0237 F500        E     MOV     del,A
0239         ?C0274:
0239 0500        E     INC     del
023B E500        E     MOV     A,del
023D B4C8F9            CJNE    A,#0C8H,?C0274
0240         ?C0275:
                                           ; SOURCE LINE # 313
0240 E4                CLR     A
0241 F500        E     MOV     del,A
0243         ?C0277:
0243 0500        E     INC     del
0245 E500        E     MOV     A,del
0247 B4C8F9            CJNE    A,#0C8H,?C0277
024A         ?C0278:
                                           ; SOURCE LINE # 314
024A E4                CLR     A
024B F500        E     MOV     del,A
024D         ?C0280:
024D 0500        E     INC     del
024F E500        E     MOV     A,del
0251 B4C8F9            CJNE    A,#0C8H,?C0280
0254         ?C0281:
                                           ; SOURCE LINE # 315
0254 E4                CLR     A
0255 F500        E     MOV     del,A
0257         ?C0283:
0257 0500        E     INC     del
0259 E500        E     MOV     A,del
025B B4C8F9            CJNE    A,#0C8H,?C0283
025E         ?C0284:
                                           ; SOURCE LINE # 316
025E E4                CLR     A
025F F500        E     MOV     del,A
0261         ?C0286:
0261 E500        E     MOV     A,del
0263 C3                CLR     C
0264 94C8              SUBB    A,#0C8H
0266 4003              JC      $ + 5H
0268 020000      R     LJMP    ?C0197
026B 0500        E     INC     del
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 24  

026D 80F2              SJMP    ?C0286
             ; FUNCTION test_uartU27_trasmetti (END)

             ; FUNCTION test_uartU30 (BEGIN)
                                           ; SOURCE LINE # 323
                                           ; SOURCE LINE # 324
                                           ; SOURCE LINE # 326
0000 E4                CLR     A
0001 F500        R     MOV     i,A
                                           ; SOURCE LINE # 328
0003 7BFF              MOV     R3,#0FFH
0005 7A00        R     MOV     R2,#HIGH ?SC_163
0007 7900        R     MOV     R1,#LOW ?SC_163
0009 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 329
000C 120000      R     LCALL   uartU30_init
                                           ; SOURCE LINE # 330
000F 8062              SJMP    ?C0299
0011         ?C0290:
                                           ; SOURCE LINE # 331
                                           ; SOURCE LINE # 332
                                           ; SOURCE LINE # 333
0011 120000      E     LCALL   getchar
0014 8F00        R     MOV     c,R7
                                           ; SOURCE LINE # 334
0016 120000      E     LCALL   _toupper
0019 8F00        R     MOV     exit_char,R7
001B EF                MOV     A,R7
001C 6451              XRL     A,#051H
001E 6058              JZ      ?C0291
0020         ?C0292:
                                           ; SOURCE LINE # 335
0020 309013            JNB     TXE_U30,?C0293
                                           ; SOURCE LINE # 336
                                           ; SOURCE LINE # 346
0023 908000            MOV     DPTR,#uartU30
0026 E500        R     MOV     A,c
0028 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 347
0029 7BFF              MOV     R3,#0FFH
002B 7A00        R     MOV     R2,#HIGH ?SC_244
002D 7900        R     MOV     R1,#LOW ?SC_244
002F F500        E     MOV     ?_printf?BYTE+03H,A
0031 F500        E     MOV     ?_printf?BYTE+04H,A
0033 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 348
0036         ?C0293:
                                           ; SOURCE LINE # 350
0036 E500        R     MOV     A,fine_u30
0038 60D7              JZ      ?C0290
                                           ; SOURCE LINE # 351
                                           ; SOURCE LINE # 352
003A 7BFF              MOV     R3,#0FFH
003C 7A00        R     MOV     R2,#HIGH ?SC_261
003E 7900        R     MOV     R1,#LOW ?SC_261
0040 F500        E     MOV     ?_printf?BYTE+03H,A
0042 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 353
0045 E4                CLR     A
0046 F500        R     MOV     i,A
0048         ?C0295:
0048 E500        R     MOV     A,i
C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 25  

004A C3                CLR     C
004B 9500        R     SUBB    A,fine_u30
004D 501B              JNC     ?C0296
                                           ; SOURCE LINE # 354
                                           ; SOURCE LINE # 355
004F 7BFF              MOV     R3,#0FFH
0051 7A00        R     MOV     R2,#HIGH ?SC_278
0053 7900        R     MOV     R1,#LOW ?SC_278
0055 7400        R     MOV     A,#LOW buff_U30
0057 2500        R     ADD     A,i
0059 F582              MOV     DPL,A
005B E4                CLR     A
005C 3400        R     ADDC    A,#HIGH buff_U30
005E F583              MOV     DPH,A
0060 E0                MOVX    A,@DPTR
0061 F500        E     MOV     ?_printf?BYTE+03H,A
0063 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 357
0066 0500        R     INC     i
0068 80DE              SJMP    ?C0295
006A         ?C0296:
                                           ; SOURCE LINE # 358
006A 7BFF              MOV     R3,#0FFH
006C 7A00        R     MOV     R2,#HIGH ?SC_286
006E 7900        R     MOV     R1,#LOW ?SC_286
0070 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 359
0073         ?C0299:
0073 E4                CLR     A
0074 F500        R     MOV     fine_u30,A
                                           ; SOURCE LINE # 360
                                           ; SOURCE LINE # 361
0076 8099              SJMP    ?C0290
0078         ?C0291:
                                           ; SOURCE LINE # 362
0078 7BFF              MOV     R3,#0FFH
007A 7A00        R     MOV     R2,#HIGH ?SC_146
007C 7900        R     MOV     R1,#LOW ?SC_146
007E 020000      E     LJMP    _printf
             ; FUNCTION test_uartU30 (END)

C51 COMPILER V8.05a   UART8251                                                             03/11/2010 12:19:51 PAGE 26  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


P1 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0090H  1
EA . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00AFH  1
test_uartU27_ricevi. . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
tipo_scheda. . . . . . . . . . . . . .  EXTERN   DATA   U_CHAR   -----  1
TXE_U30. . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0090H  1
start_ritardo. . . . . . . . . . . . .  STATIC   XDATA  U_INT    0000H  2
uartU30_init . . . . . . . . . . . . .  STATIC   CODE   PROC     0000H  -----
size_t . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
_toupper . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
uartU27_init . . . . . . . . . . . . .  STATIC   CODE   PROC     0000H  -----
inizio . . . . . . . . . . . . . . . .  STATIC   DATA   U_CHAR   0000H  1
uchar. . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
_printf. . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
test_uartU30 . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  i. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0000H  1
  exit_char. . . . . . . . . . . . . .  AUTO     DATA   CHAR     0001H  1
ushort . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
del. . . . . . . . . . . . . . . . . .  EXTERN   DATA   U_CHAR   -----  1
test_uartU27_rx_tx . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
buff_U30 . . . . . . . . . . . . . . .  STATIC   XDATA  ARRAY    0002H  256
UINT . . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
uint . . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
RX_RDY_U30_isr . . . . . . . . . . . .  STATIC   CODE   PROC     0000H  -----
buff_U27 . . . . . . . . . . . . . . .  STATIC   XDATA  ARRAY    0102H  256
uart_reset . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
RX_RDY_U27_isr . . . . . . . . . . . .  STATIC   CODE   PROC     0000H  -----
PIO_RESET. . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0097H  1
fine_u30 . . . . . . . . . . . . . . .  STATIC   DATA   U_CHAR   0001H  1
c. . . . . . . . . . . . . . . . . . .  STATIC   DATA   CHAR     0002H  1
getchar. . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
fine_u27 . . . . . . . . . . . . . . .  STATIC   DATA   U_CHAR   0003H  1
test_uartU27_trasmetti . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
USHORT . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
i. . . . . . . . . . . . . . . . . . .  STATIC   DATA   U_CHAR   0004H  1
UCHAR. . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
uartU30. . . . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    8000H  2
uartU27. . . . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    6000H  2


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1388    ----
   CONSTANT SIZE    =    289    ----
   XDATA SIZE       =    514    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
