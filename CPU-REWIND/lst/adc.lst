C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 1   


C51 COMPILER V8.05a, COMPILATION OF MODULE ADC
OBJECT MODULE PLACED IN .\exe\adc.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE src\adc.c OPTIMIZE(SIZE) CODE SYMBOLS PRINT(.\lst\adc.lst) PREPRINT(.\lst\a
                    -dc.i) OBJECT(.\exe\adc.obj)

line level    source

   1          /*************************************************************************************/
   2          /* 04/01/10 1.04.13             \SRC\adc.c                     */
   3          /*************************************************************************************/
   4          
   5          #include "stdlib.h"
   6          #include "reg51.h"
   7          #include "stdio.h"
   8          #include <string.h>
   9          #include "adc.h"
  10          #include "pio.h"
  11          /*
  12                  clock 614.06 KHz ->  1.63us
  13          */
  14          /*************************************************************************************/
  15          #define SAMPLE 10
  16          #define ADC_ADDR_START  0xA000
  17          #define EPS  13 //~5% di fondoscala
  18          /*************************************************************************************/
  19          sbit EOC = P1^2;
  20          
  21          /*************************************************************************************/
  22          static unsigned char  val_atteso[8] ={          0xB0,//IN0 3.46 Volt 
  23                                                                                                  0x5B,//IN1 1.8   //
  24                                                                                                  0x59,//IN2 1.76  //
  25                                                                                                  0x8E,//IN3 2.8   //
  26                                                                                                  0x84,//IN4 2.6   //
  27                                                                                                  0xb5,//IN5 3.56          //
  28                                                                                                  0, 
  29                                                                                                  0};
  30          static char result[3];
  31          
  32          /*************************************************************************************/
  33          
  34          static unsigned short  canale[8];
  35          static unsigned short  xdata esito[8];
  36          unsigned char xdata *adc;
  37          //volatile unsigned char xdata  adc _at_ ADC_ADDR_START;  /* generic pointer */
  38          
  39          unsigned char num_s;
  40          
  41          unsigned char i=0;
  42          unsigned char k=0,s;
  43          unsigned short appo;
  44          char c;
  45          extern unsigned char tipo_scheda;
  46          
  47          /*************************************************************************************/
  48          
  49          void test_adc(void);
  50          
  51          /*************************************************************************************/
  52          unsigned char test_adc_canale(unsigned char i,unsigned char val)
  53          {
  54   1              unsigned char ret;
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 2   

  55   1              // inizializza var lettura
  56   1              canale[i]=0;
  57   1              ret =0;
  58   1              for(num_s=1 ;num_s<=SAMPLE; num_s++)
  59   1          {
  60   2              adc = ADC_ADDR_START + i;
  61   2              *adc = 0x7f;    // comanda il s.o.c. all' ADC
  62   2              
  63   2                      while(!EOC) /*printf("*")*/; //attende la fine della conversione
  64   2      
  65   2                      s  = *adc; //lettura tramite buffer
  66   2      
  67   2                      printf("ch: %bd   ",i);
  68   2                      printf("sample n° %bd   ",num_s);
  69   2                      printf("lettura: 0x%bX (%1.2f Volt) \n",(*adc), *adc *0.0196 );
  70   2             
  71   2              canale[i] = canale[i] + *adc ;
  72   2          }
  73   1          canale[i] = canale[i] / SAMPLE;
  74   1              printf("ch: %bd  lettura 0x%X   (%1.2f Volt)\n", i, canale[i],(canale[i]* 0.0196));
  75   1      
  76   1              if( abs(canale[i] - val) <= EPS) 
  77   1                        {strcpy (result, "OK"+'\0'); ret = 0;}
  78   1              else
  79   1                        {strcpy (result, "KO" +'\0'); ret = 1;}
  80   1              printf("Esito test ch IN%bd = 0x%02X   lettura: %1.2fV  Val atteso: %1.2fV    ",i,canale[i],(canale[i]* 0
             -.0196),(unsigned short)val* 0.0196);
  81   1              printf("esito: %s\n",result);
  82   1              return (ret);
  83   1      }
  84          void test_adc(void)
  85          {
  86   1      //      static char s;
  87   1              int ritardo;
  88   1      //      char del;
  89   1      
  90   1      //      static unsigned char exit, scelta;
  91   1              for(i=0; i<8; i++) esito[i]=0;
  92   1              printf("\n\n*****  Test ADC  *****   \n\n");
  93   1      /*      do
  94   1              {
  95   1                      printf("Selezionare il tipo di scheda :\n");
  96   1                      printf("   1 - DG630-12\n");
  97   1                      printf("   2 - DG630-29\n\n");
  98   1                      printf("     Scelta: ");
  99   1                      s = _getkey();
 100   1                      printf("\n");
 101   1                      exit =0;        
 102   1                      scelta = s-0x30;
 103   1                      if(scelta>0 && scelta<3)
 104   1                      {
 105   1                         if(tipo_scheda == 1) 
 106   1                              val_atteso[5] =0;
 107   1                         else 
 108   1                              val_atteso[5] =0xb5; 
 109   1                         exit =1;
 110   1                      }
 111   1              }
 112   1              while(!exit);
 113   1      */
 114   1          if(tipo_scheda == 1) 
 115   1                      val_atteso[5] =0;
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 3   

 116   1          else 
 117   1                      val_atteso[5] =0xb5; 
 118   1      
 119   1      
 120   1              printf("\nPosizionare lo switch NOISE al centro e\n");
 121   1              printf("verificare che i led S1 e S2 siano spenti\n");
 122   1              printf("Premere INVIO per proseguire \n");while ( (c = getchar())!= 0x0A) ;
 123   1              printf("\nTest canale IN0\n");
 124   1      
 125   1              for( ritardo=0; ritardo<5000; ritardo++); 
 126   1              for( ritardo=0; ritardo<10000; ritardo++); 
 127   1              for( ritardo=0; ritardo<10000; ritardo++); 
 128   1              for( ritardo=0; ritardo<10000; ritardo++); 
 129   1              for( ritardo=0; ritardo<10000; ritardo++); 
 130   1              for( ritardo=0; ritardo<10000; ritardo++); 
 131   1              for( ritardo=0; ritardo<10000; ritardo++); 
 132   1              for( ritardo=0; ritardo<10000; ritardo++); 
 133   1              for( ritardo=0; ritardo<10000; ritardo++); 
 134   1              for( ritardo=0; ritardo<10000; ritardo++); 
 135   1              for( ritardo=0; ritardo<10000; ritardo++); 
 136   1              for( ritardo=0; ritardo<10000; ritardo++); 
 137   1              for( ritardo=0; ritardo<10000; ritardo++); 
 138   1              for( ritardo=0; ritardo<10000; ritardo++); 
 139   1              for( ritardo=0; ritardo<10000; ritardo++); 
 140   1              for( ritardo=0; ritardo<10000; ritardo++); 
 141   1              for( ritardo=0; ritardo<10000; ritardo++); 
 142   1              for( ritardo=0; ritardo<10000; ritardo++); 
 143   1              for( ritardo=0; ritardo<10000; ritardo++); 
 144   1              for( ritardo=0; ritardo<10000; ritardo++); 
 145   1              for( ritardo=0; ritardo<10000; ritardo++); 
 146   1      
 147   1      
 148   1      
 149   1              esito[0] = test_adc_canale(0, 0);
 150   1      
 151   1              if (esito[0]) esito[0]<<=1;
 152   1              printf("Premere INVIO per proseguire \n");while ( (c = getchar())!= 0x0A) ;
 153   1              printf("\nTest canale IN1\n");
 154   1              for( ritardo=0; ritardo<5000; ritardo++); 
 155   1              esito[1] = test_adc_canale(1, 0);
 156   1      
 157   1              if (esito[1]) esito[1]<<=1;
 158   1              printf("Premere INVIO per proseguire \n");while ( (c = getchar())!= 0x0A) ;
 159   1              printf("\nTest canale IN2\n");
 160   1              for( ritardo=0; ritardo<5000; ritardo++); 
 161   1              esito[2] = test_adc_canale(2, 0);
 162   1      
 163   1              if (esito[2]) esito[2]<<=1;
 164   1      
 165   1              printf("Premere INVIO per proseguire \n");while ( (c = getchar())!= 0x0A) ;
 166   1      
 167   1          for(i=0; i<8; i++) //in0..in7
 168   1          {
 169   2                      printf("\nTest IN%bd\n",i);
 170   2                      if(i == 0) 
 171   2                              printf("Posizionare lo switch NOISE su NOISE1 e verificare cke il led S1 sia acceso (test IN%bd)\n",i);
 172   2                      else if(i == 1) 
 173   2                              printf("Posizionare lo switch NOISE su NOISE1 (test IN%bd)\n",i);
 174   2                      else if(i == 2) 
 175   2                              printf("Posizionare lo switch NOISE su NOISE2 e verificare cke il led S2 sia acceso (test IN%bd)\n",i);
 176   2                      printf("Premere INVIO per proseguire \n");while ( (c = getchar())!= 0x0A) ;
 177   2      
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 4   

 178   2                      if(i < 2 ) 
 179   2                      {
 180   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 181   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 182   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 183   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 184   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 185   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 186   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 187   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 188   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 189   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 190   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 191   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 192   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 193   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 194   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 195   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 196   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 197   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 198   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 199   3                              for( ritardo=0; ritardo<10000; ritardo++); 
 200   3                      }
 201   2                      esito[i] |= test_adc_canale(i, val_atteso[i]);
 202   2                      
 203   2                      printf("Premere INVIO per proseguire \n");
 204   2                  while ( (c = getchar())!= 0x0A) ;
 205   2          }
 206   1      
 207   1              printf("Riepilogo test ADC\n");
 208   1      
 209   1          for(i=0; i<8; i++)
 210   1          {
 211   2                      if(( abs(canale[i] - val_atteso[i]) <= EPS) && (esito[i]&0x02)==0) 
 212   2                                strcpy (result, "OK"+'\0');
 213   2                      else
 214   2                                strcpy (result, "KO" +'\0');
 215   2                      printf("Test IN%bd = 0x%02X   lettura: %1.2fV  Val atteso: %1.2fV    ",i,canale[i],(canale[i]* 0.0196),(
             -(unsigned short)val_atteso[i])* 0.0196);
 216   2                      printf("esito: %s\n",result);
 217   2          }
 218   1              getchar();
 219   1          printf("\n\n");
 220   1      }
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 5   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION _test_adc_canale (BEGIN)
                                           ; SOURCE LINE # 52
0000 8F00        R     MOV     i,R7
0002 8D00        R     MOV     val,R5
                                           ; SOURCE LINE # 53
                                           ; SOURCE LINE # 56
0004 EF                MOV     A,R7
0005 25E0              ADD     A,ACC
0007 2400        R     ADD     A,#LOW canale
0009 F8                MOV     R0,A
000A E4                CLR     A
000B F6                MOV     @R0,A
000C 08                INC     R0
000D F6                MOV     @R0,A
                                           ; SOURCE LINE # 57
000E F500        R     MOV     ret,A
                                           ; SOURCE LINE # 58
0010 750001      R     MOV     num_s,#01H
0013         ?C0001:
                                           ; SOURCE LINE # 59
                                           ; SOURCE LINE # 60
0013 E4                CLR     A
0014 2500        R     ADD     A,i
0016 FF                MOV     R7,A
0017 E4                CLR     A
0018 34A0              ADDC    A,#0A0H
001A F500        R     MOV     adc,A
001C 8F00        R     MOV     adc+01H,R7
                                           ; SOURCE LINE # 61
001E 8F82              MOV     DPL,R7
0020 F583              MOV     DPH,A
0022 747F              MOV     A,#07FH
0024 F0                MOVX    @DPTR,A
0025         ?C0004:
                                           ; SOURCE LINE # 63
0025 3092FD            JNB     EOC,?C0004
0028         ?C0005:
                                           ; SOURCE LINE # 65
0028 850082      R     MOV     DPL,adc+01H
002B 850083      R     MOV     DPH,adc
002E E0                MOVX    A,@DPTR
002F F500        R     MOV     s,A
                                           ; SOURCE LINE # 67
0031 7BFF              MOV     R3,#0FFH
0033 7A00        R     MOV     R2,#HIGH ?SC_0
0035 7900        R     MOV     R1,#LOW ?SC_0
0037 850000      E     MOV     ?_printf?BYTE+03H,i
003A 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 68
003D 7BFF              MOV     R3,#0FFH
003F 7A00        R     MOV     R2,#HIGH ?SC_11
0041 7900        R     MOV     R1,#LOW ?SC_11
0043 850000      E     MOV     ?_printf?BYTE+03H,num_s
0046 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 69
0049 850082      R     MOV     DPL,adc+01H
004C 850083      R     MOV     DPH,adc
004F E0                MOVX    A,@DPTR
0050 FC                MOV     R4,A
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 6   

0051 F500        E     MOV     ?_printf?BYTE+03H,A
0053 E4                CLR     A
0054 120000      E     LCALL   ?C?FCASTC
0057 7B2E              MOV     R3,#02EH
0059 7A90              MOV     R2,#090H
005B 79A0              MOV     R1,#0A0H
005D 783C              MOV     R0,#03CH
005F 120000      E     LCALL   ?C?FPMUL
0062 8F00        E     MOV     ?_printf?BYTE+07H,R7
0064 8E00        E     MOV     ?_printf?BYTE+06H,R6
0066 8D00        E     MOV     ?_printf?BYTE+05H,R5
0068 8C00        E     MOV     ?_printf?BYTE+04H,R4
006A 7BFF              MOV     R3,#0FFH
006C 7A00        R     MOV     R2,#HIGH ?SC_28
006E 7900        R     MOV     R1,#LOW ?SC_28
0070 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 71
0073 850082      R     MOV     DPL,adc+01H
0076 850083      R     MOV     DPH,adc
0079 E0                MOVX    A,@DPTR
007A FF                MOV     R7,A
007B E500        R     MOV     A,i
007D 25E0              ADD     A,ACC
007F 2400        R     ADD     A,#LOW canale
0081 F8                MOV     R0,A
0082 08                INC     R0
0083 EF                MOV     A,R7
0084 26                ADD     A,@R0
0085 F6                MOV     @R0,A
0086 18                DEC     R0
0087 E4                CLR     A
0088 36                ADDC    A,@R0
0089 F6                MOV     @R0,A
                                           ; SOURCE LINE # 72
008A 0500        R     INC     num_s
008C E500        R     MOV     A,num_s
008E D3                SETB    C
008F 940A              SUBB    A,#0AH
0091 4080              JC      ?C0001
0093         ?C0002:
                                           ; SOURCE LINE # 73
0093 E500        R     MOV     A,i
0095 25E0              ADD     A,ACC
0097 2400        R     ADD     A,#LOW canale
0099 F8                MOV     R0,A
009A C000              PUSH    AR0
009C E6                MOV     A,@R0
009D FE                MOV     R6,A
009E 08                INC     R0
009F E6                MOV     A,@R0
00A0 FF                MOV     R7,A
00A1 7C00              MOV     R4,#00H
00A3 7D0A              MOV     R5,#0AH
00A5 120000      E     LCALL   ?C?UIDIV
00A8 D000              POP     AR0
00AA A606              MOV     @R0,AR6
00AC 08                INC     R0
00AD A607              MOV     @R0,AR7
                                           ; SOURCE LINE # 74
00AF 850000      E     MOV     ?_printf?BYTE+03H,i
00B2 E500        R     MOV     A,i
00B4 25E0              ADD     A,ACC
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 7   

00B6 2400        R     ADD     A,#LOW canale
00B8 F8                MOV     R0,A
00B9 E6                MOV     A,@R0
00BA FC                MOV     R4,A
00BB 08                INC     R0
00BC E6                MOV     A,@R0
00BD FD                MOV     R5,A
00BE 8C00        E     MOV     ?_printf?BYTE+04H,R4
00C0 F500        E     MOV     ?_printf?BYTE+05H,A
00C2 E4                CLR     A
00C3 120000      E     LCALL   ?C?FCASTI
00C6 7B2E              MOV     R3,#02EH
00C8 7A90              MOV     R2,#090H
00CA 79A0              MOV     R1,#0A0H
00CC 783C              MOV     R0,#03CH
00CE 120000      E     LCALL   ?C?FPMUL
00D1 8F00        E     MOV     ?_printf?BYTE+09H,R7
00D3 8E00        E     MOV     ?_printf?BYTE+08H,R6
00D5 8D00        E     MOV     ?_printf?BYTE+07H,R5
00D7 8C00        E     MOV     ?_printf?BYTE+06H,R4
00D9 7BFF              MOV     R3,#0FFH
00DB 7A00        R     MOV     R2,#HIGH ?SC_58
00DD 7900        R     MOV     R1,#LOW ?SC_58
00DF 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 76
00E2 E500        R     MOV     A,i
00E4 25E0              ADD     A,ACC
00E6 2400        R     ADD     A,#LOW canale
00E8 F8                MOV     R0,A
00E9 E6                MOV     A,@R0
00EA FC                MOV     R4,A
00EB 08                INC     R0
00EC E6                MOV     A,@R0
00ED C3                CLR     C
00EE 9500        R     SUBB    A,val
00F0 FF                MOV     R7,A
00F1 EC                MOV     A,R4
00F2 9400              SUBB    A,#00H
00F4 FE                MOV     R6,A
00F5 120000      E     LCALL   _abs
00F8 D3                SETB    C
00F9 EF                MOV     A,R7
00FA 940D              SUBB    A,#0DH
00FC EE                MOV     A,R6
00FD 6480              XRL     A,#080H
00FF 9480              SUBB    A,#080H
0101 7800        R     MOV     R0,#LOW result
0103 7C00        R     MOV     R4,#HIGH result
0105 7D00              MOV     R5,#00H
0107 7BFF              MOV     R3,#0FFH
0109 500C              JNC     ?C0006
                                           ; SOURCE LINE # 77
010B 7A00        R     MOV     R2,#HIGH ?SC_96
010D 7900        R     MOV     R1,#LOW ?SC_96
010F 120000      E     LCALL   ?C?STRCPY
0112 E4                CLR     A
0113 F500        R     MOV     ret,A
0115 800A              SJMP    ?C0007
0117         ?C0006:
                                           ; SOURCE LINE # 79
0117 7A00        R     MOV     R2,#HIGH ?SC_99
0119 7900        R     MOV     R1,#LOW ?SC_99
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 8   

011B 120000      E     LCALL   ?C?STRCPY
011E 750001      R     MOV     ret,#01H
0121         ?C0007:
                                           ; SOURCE LINE # 80
0121 850000      E     MOV     ?_printf?BYTE+03H,i
0124 E500        R     MOV     A,i
0126 25E0              ADD     A,ACC
0128 2400        R     ADD     A,#LOW canale
012A F8                MOV     R0,A
012B E6                MOV     A,@R0
012C FC                MOV     R4,A
012D 08                INC     R0
012E E6                MOV     A,@R0
012F FD                MOV     R5,A
0130 8C00        E     MOV     ?_printf?BYTE+04H,R4
0132 F500        E     MOV     ?_printf?BYTE+05H,A
0134 E4                CLR     A
0135 120000      E     LCALL   ?C?FCASTI
0138 7B2E              MOV     R3,#02EH
013A 7A90              MOV     R2,#090H
013C 79A0              MOV     R1,#0A0H
013E 783C              MOV     R0,#03CH
0140 120000      E     LCALL   ?C?FPMUL
0143 8F00        E     MOV     ?_printf?BYTE+09H,R7
0145 8E00        E     MOV     ?_printf?BYTE+08H,R6
0147 8D00        E     MOV     ?_printf?BYTE+07H,R5
0149 8C00        E     MOV     ?_printf?BYTE+06H,R4
014B E500        R     MOV     A,val
014D FD                MOV     R5,A
014E 7C00              MOV     R4,#00H
0150 E4                CLR     A
0151 120000      E     LCALL   ?C?FCASTI
0154 7B2E              MOV     R3,#02EH
0156 7A90              MOV     R2,#090H
0158 79A0              MOV     R1,#0A0H
015A 783C              MOV     R0,#03CH
015C 120000      E     LCALL   ?C?FPMUL
015F 8F00        E     MOV     ?_printf?BYTE+0DH,R7
0161 8E00        E     MOV     ?_printf?BYTE+0CH,R6
0163 8D00        E     MOV     ?_printf?BYTE+0BH,R5
0165 8C00        E     MOV     ?_printf?BYTE+0AH,R4
0167 7BFF              MOV     R3,#0FFH
0169 7A00        R     MOV     R2,#HIGH ?SC_102
016B 7900        R     MOV     R1,#LOW ?SC_102
016D 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 81
0170 750000      E     MOV     ?_printf?BYTE+03H,#00H
0173 750000      R     MOV     ?_printf?BYTE+04H,#HIGH result
0176 750000      R     MOV     ?_printf?BYTE+05H,#LOW result
0179 7BFF              MOV     R3,#0FFH
017B 7A00        R     MOV     R2,#HIGH ?SC_173
017D 7900        R     MOV     R1,#LOW ?SC_173
017F 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 82
0182 AF00        R     MOV     R7,ret
                                           ; SOURCE LINE # 83
0184         ?C0008:
0184 22                RET     
             ; FUNCTION _test_adc_canale (END)

             ; FUNCTION test_adc (BEGIN)
                                           ; SOURCE LINE # 84
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 9   

                                           ; SOURCE LINE # 85
                                           ; SOURCE LINE # 91
0000 E4                CLR     A
0001 F500        R     MOV     i,A
0003         ?C0009:
0003 E500        R     MOV     A,i
0005 25E0              ADD     A,ACC
0007 2400        R     ADD     A,#LOW esito
0009 F582              MOV     DPL,A
000B E4                CLR     A
000C 3400        R     ADDC    A,#HIGH esito
000E F583              MOV     DPH,A
0010 E4                CLR     A
0011 F0                MOVX    @DPTR,A
0012 A3                INC     DPTR
0013 F0                MOVX    @DPTR,A
0014 0500        R     INC     i
0016 E500        R     MOV     A,i
0018 B408E8            CJNE    A,#08H,?C0009
001B         ?C0010:
                                           ; SOURCE LINE # 92
001B 7BFF              MOV     R3,#0FFH
001D 7A00        R     MOV     R2,#HIGH ?SC_184
001F 7900        R     MOV     R1,#LOW ?SC_184
0021 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 114
0024 E500        E     MOV     A,tipo_scheda
0026 B40105            CJNE    A,#01H,?C0012
                                           ; SOURCE LINE # 115
0029 E4                CLR     A
002A F500        R     MOV     val_atteso+05H,A
002C 8003              SJMP    ?C0013
002E         ?C0012:
                                           ; SOURCE LINE # 117
002E 7500B5      R     MOV     val_atteso+05H,#0B5H
0031         ?C0013:
                                           ; SOURCE LINE # 120
0031 7BFF              MOV     R3,#0FFH
0033 7A00        R     MOV     R2,#HIGH ?SC_214
0035 7900        R     MOV     R1,#LOW ?SC_214
0037 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 121
003A 7BFF              MOV     R3,#0FFH
003C 7A00        R     MOV     R2,#HIGH ?SC_256
003E 7900        R     MOV     R1,#LOW ?SC_256
0040 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 122
0043 7BFF              MOV     R3,#0FFH
0045 7A00        R     MOV     R2,#HIGH ?SC_299
0047 7900        R     MOV     R1,#LOW ?SC_299
0049 120000      E     LCALL   _printf
004C         ?C0014:
004C 120000      E     LCALL   getchar
004F 8F00        R     MOV     c,R7
0051 BF0AF8            CJNE    R7,#0AH,?C0014
0054         ?C0015:
                                           ; SOURCE LINE # 123
0054 7BFF              MOV     R3,#0FFH
0056 7A00        R     MOV     R2,#HIGH ?SC_330
0058 7900        R     MOV     R1,#LOW ?SC_330
005A 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 125
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 10  

005D E4                CLR     A
005E F500        R     MOV     ritardo,A
0060 F500        R     MOV     ritardo+01H,A
0062         ?C0016:
0062 0500        R     INC     ritardo+01H
0064 E500        R     MOV     A,ritardo+01H
0066 7002              JNZ     ?C0173
0068 0500        R     INC     ritardo
006A         ?C0173:
006A B488F5            CJNE    A,#088H,?C0016
006D E500        R     MOV     A,ritardo
006F B413F0            CJNE    A,#013H,?C0016
0072         ?C0017:
                                           ; SOURCE LINE # 126
0072 E4                CLR     A
0073 F500        R     MOV     ritardo,A
0075 F500        R     MOV     ritardo+01H,A
0077         ?C0019:
0077 0500        R     INC     ritardo+01H
0079 E500        R     MOV     A,ritardo+01H
007B 7002              JNZ     ?C0175
007D 0500        R     INC     ritardo
007F         ?C0175:
007F B410F5            CJNE    A,#010H,?C0019
0082 E500        R     MOV     A,ritardo
0084 B427F0            CJNE    A,#027H,?C0019
0087         ?C0020:
                                           ; SOURCE LINE # 127
0087 E4                CLR     A
0088 F500        R     MOV     ritardo,A
008A F500        R     MOV     ritardo+01H,A
008C         ?C0022:
008C 0500        R     INC     ritardo+01H
008E E500        R     MOV     A,ritardo+01H
0090 7002              JNZ     ?C0177
0092 0500        R     INC     ritardo
0094         ?C0177:
0094 B410F5            CJNE    A,#010H,?C0022
0097 E500        R     MOV     A,ritardo
0099 B427F0            CJNE    A,#027H,?C0022
009C         ?C0023:
                                           ; SOURCE LINE # 128
009C E4                CLR     A
009D F500        R     MOV     ritardo,A
009F F500        R     MOV     ritardo+01H,A
00A1         ?C0025:
00A1 0500        R     INC     ritardo+01H
00A3 E500        R     MOV     A,ritardo+01H
00A5 7002              JNZ     ?C0179
00A7 0500        R     INC     ritardo
00A9         ?C0179:
00A9 B410F5            CJNE    A,#010H,?C0025
00AC E500        R     MOV     A,ritardo
00AE B427F0            CJNE    A,#027H,?C0025
00B1         ?C0026:
                                           ; SOURCE LINE # 129
00B1 E4                CLR     A
00B2 F500        R     MOV     ritardo,A
00B4 F500        R     MOV     ritardo+01H,A
00B6         ?C0028:
00B6 0500        R     INC     ritardo+01H
00B8 E500        R     MOV     A,ritardo+01H
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 11  

00BA 7002              JNZ     ?C0181
00BC 0500        R     INC     ritardo
00BE         ?C0181:
00BE B410F5            CJNE    A,#010H,?C0028
00C1 E500        R     MOV     A,ritardo
00C3 B427F0            CJNE    A,#027H,?C0028
00C6         ?C0029:
                                           ; SOURCE LINE # 130
00C6 E4                CLR     A
00C7 F500        R     MOV     ritardo,A
00C9 F500        R     MOV     ritardo+01H,A
00CB         ?C0031:
00CB 0500        R     INC     ritardo+01H
00CD E500        R     MOV     A,ritardo+01H
00CF 7002              JNZ     ?C0183
00D1 0500        R     INC     ritardo
00D3         ?C0183:
00D3 B410F5            CJNE    A,#010H,?C0031
00D6 E500        R     MOV     A,ritardo
00D8 B427F0            CJNE    A,#027H,?C0031
00DB         ?C0032:
                                           ; SOURCE LINE # 131
00DB E4                CLR     A
00DC F500        R     MOV     ritardo,A
00DE F500        R     MOV     ritardo+01H,A
00E0         ?C0034:
00E0 0500        R     INC     ritardo+01H
00E2 E500        R     MOV     A,ritardo+01H
00E4 7002              JNZ     ?C0185
00E6 0500        R     INC     ritardo
00E8         ?C0185:
00E8 B410F5            CJNE    A,#010H,?C0034
00EB E500        R     MOV     A,ritardo
00ED B427F0            CJNE    A,#027H,?C0034
00F0         ?C0035:
                                           ; SOURCE LINE # 132
00F0 E4                CLR     A
00F1 F500        R     MOV     ritardo,A
00F3 F500        R     MOV     ritardo+01H,A
00F5         ?C0037:
00F5 0500        R     INC     ritardo+01H
00F7 E500        R     MOV     A,ritardo+01H
00F9 7002              JNZ     ?C0187
00FB 0500        R     INC     ritardo
00FD         ?C0187:
00FD B410F5            CJNE    A,#010H,?C0037
0100 E500        R     MOV     A,ritardo
0102 B427F0            CJNE    A,#027H,?C0037
0105         ?C0038:
                                           ; SOURCE LINE # 133
0105 E4                CLR     A
0106 F500        R     MOV     ritardo,A
0108 F500        R     MOV     ritardo+01H,A
010A         ?C0040:
010A 0500        R     INC     ritardo+01H
010C E500        R     MOV     A,ritardo+01H
010E 7002              JNZ     ?C0189
0110 0500        R     INC     ritardo
0112         ?C0189:
0112 B410F5            CJNE    A,#010H,?C0040
0115 E500        R     MOV     A,ritardo
0117 B427F0            CJNE    A,#027H,?C0040
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 12  

011A         ?C0041:
                                           ; SOURCE LINE # 134
011A E4                CLR     A
011B F500        R     MOV     ritardo,A
011D F500        R     MOV     ritardo+01H,A
011F         ?C0043:
011F 0500        R     INC     ritardo+01H
0121 E500        R     MOV     A,ritardo+01H
0123 7002              JNZ     ?C0191
0125 0500        R     INC     ritardo
0127         ?C0191:
0127 B410F5            CJNE    A,#010H,?C0043
012A E500        R     MOV     A,ritardo
012C B427F0            CJNE    A,#027H,?C0043
012F         ?C0044:
                                           ; SOURCE LINE # 135
012F E4                CLR     A
0130 F500        R     MOV     ritardo,A
0132 F500        R     MOV     ritardo+01H,A
0134         ?C0046:
0134 0500        R     INC     ritardo+01H
0136 E500        R     MOV     A,ritardo+01H
0138 7002              JNZ     ?C0193
013A 0500        R     INC     ritardo
013C         ?C0193:
013C B410F5            CJNE    A,#010H,?C0046
013F E500        R     MOV     A,ritardo
0141 B427F0            CJNE    A,#027H,?C0046
0144         ?C0047:
                                           ; SOURCE LINE # 136
0144 E4                CLR     A
0145 F500        R     MOV     ritardo,A
0147 F500        R     MOV     ritardo+01H,A
0149         ?C0049:
0149 0500        R     INC     ritardo+01H
014B E500        R     MOV     A,ritardo+01H
014D 7002              JNZ     ?C0195
014F 0500        R     INC     ritardo
0151         ?C0195:
0151 B410F5            CJNE    A,#010H,?C0049
0154 E500        R     MOV     A,ritardo
0156 B427F0            CJNE    A,#027H,?C0049
0159         ?C0050:
                                           ; SOURCE LINE # 137
0159 E4                CLR     A
015A F500        R     MOV     ritardo,A
015C F500        R     MOV     ritardo+01H,A
015E         ?C0052:
015E 0500        R     INC     ritardo+01H
0160 E500        R     MOV     A,ritardo+01H
0162 7002              JNZ     ?C0197
0164 0500        R     INC     ritardo
0166         ?C0197:
0166 B410F5            CJNE    A,#010H,?C0052
0169 E500        R     MOV     A,ritardo
016B B427F0            CJNE    A,#027H,?C0052
016E         ?C0053:
                                           ; SOURCE LINE # 138
016E E4                CLR     A
016F F500        R     MOV     ritardo,A
0171 F500        R     MOV     ritardo+01H,A
0173         ?C0055:
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 13  

0173 0500        R     INC     ritardo+01H
0175 E500        R     MOV     A,ritardo+01H
0177 7002              JNZ     ?C0199
0179 0500        R     INC     ritardo
017B         ?C0199:
017B B410F5            CJNE    A,#010H,?C0055
017E E500        R     MOV     A,ritardo
0180 B427F0            CJNE    A,#027H,?C0055
0183         ?C0056:
                                           ; SOURCE LINE # 139
0183 E4                CLR     A
0184 F500        R     MOV     ritardo,A
0186 F500        R     MOV     ritardo+01H,A
0188         ?C0058:
0188 0500        R     INC     ritardo+01H
018A E500        R     MOV     A,ritardo+01H
018C 7002              JNZ     ?C0201
018E 0500        R     INC     ritardo
0190         ?C0201:
0190 B410F5            CJNE    A,#010H,?C0058
0193 E500        R     MOV     A,ritardo
0195 B427F0            CJNE    A,#027H,?C0058
0198         ?C0059:
                                           ; SOURCE LINE # 140
0198 E4                CLR     A
0199 F500        R     MOV     ritardo,A
019B F500        R     MOV     ritardo+01H,A
019D         ?C0061:
019D 0500        R     INC     ritardo+01H
019F E500        R     MOV     A,ritardo+01H
01A1 7002              JNZ     ?C0203
01A3 0500        R     INC     ritardo
01A5         ?C0203:
01A5 B410F5            CJNE    A,#010H,?C0061
01A8 E500        R     MOV     A,ritardo
01AA B427F0            CJNE    A,#027H,?C0061
01AD         ?C0062:
                                           ; SOURCE LINE # 141
01AD E4                CLR     A
01AE F500        R     MOV     ritardo,A
01B0 F500        R     MOV     ritardo+01H,A
01B2         ?C0064:
01B2 0500        R     INC     ritardo+01H
01B4 E500        R     MOV     A,ritardo+01H
01B6 7002              JNZ     ?C0205
01B8 0500        R     INC     ritardo
01BA         ?C0205:
01BA B410F5            CJNE    A,#010H,?C0064
01BD E500        R     MOV     A,ritardo
01BF B427F0            CJNE    A,#027H,?C0064
01C2         ?C0065:
                                           ; SOURCE LINE # 142
01C2 E4                CLR     A
01C3 F500        R     MOV     ritardo,A
01C5 F500        R     MOV     ritardo+01H,A
01C7         ?C0067:
01C7 0500        R     INC     ritardo+01H
01C9 E500        R     MOV     A,ritardo+01H
01CB 7002              JNZ     ?C0207
01CD 0500        R     INC     ritardo
01CF         ?C0207:
01CF B410F5            CJNE    A,#010H,?C0067
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 14  

01D2 E500        R     MOV     A,ritardo
01D4 B427F0            CJNE    A,#027H,?C0067
01D7         ?C0068:
                                           ; SOURCE LINE # 143
01D7 E4                CLR     A
01D8 F500        R     MOV     ritardo,A
01DA F500        R     MOV     ritardo+01H,A
01DC         ?C0070:
01DC 0500        R     INC     ritardo+01H
01DE E500        R     MOV     A,ritardo+01H
01E0 7002              JNZ     ?C0209
01E2 0500        R     INC     ritardo
01E4         ?C0209:
01E4 B410F5            CJNE    A,#010H,?C0070
01E7 E500        R     MOV     A,ritardo
01E9 B427F0            CJNE    A,#027H,?C0070
01EC         ?C0071:
                                           ; SOURCE LINE # 144
01EC E4                CLR     A
01ED F500        R     MOV     ritardo,A
01EF F500        R     MOV     ritardo+01H,A
01F1         ?C0073:
01F1 0500        R     INC     ritardo+01H
01F3 E500        R     MOV     A,ritardo+01H
01F5 7002              JNZ     ?C0211
01F7 0500        R     INC     ritardo
01F9         ?C0211:
01F9 B410F5            CJNE    A,#010H,?C0073
01FC E500        R     MOV     A,ritardo
01FE B427F0            CJNE    A,#027H,?C0073
0201         ?C0074:
                                           ; SOURCE LINE # 145
0201 E4                CLR     A
0202 F500        R     MOV     ritardo,A
0204 F500        R     MOV     ritardo+01H,A
0206         ?C0076:
0206 0500        R     INC     ritardo+01H
0208 E500        R     MOV     A,ritardo+01H
020A 7002              JNZ     ?C0213
020C 0500        R     INC     ritardo
020E         ?C0213:
020E B410F5            CJNE    A,#010H,?C0076
0211 E500        R     MOV     A,ritardo
0213 B427F0            CJNE    A,#027H,?C0076
0216         ?C0077:
                                           ; SOURCE LINE # 149
0216 E4                CLR     A
0217 FD                MOV     R5,A
0218 FF                MOV     R7,A
0219 120000      R     LCALL   _test_adc_canale
021C 7E00              MOV     R6,#00H
021E 900000      R     MOV     DPTR,#esito
0221 EE                MOV     A,R6
0222 F0                MOVX    @DPTR,A
0223 A3                INC     DPTR
0224 EF                MOV     A,R7
0225 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 151
0226 600A              JZ      ?C0079
0228 E0                MOVX    A,@DPTR
0229 25E0              ADD     A,ACC
022B F0                MOVX    @DPTR,A
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 15  

022C 900000      R     MOV     DPTR,#esito
022F E0                MOVX    A,@DPTR
0230 33                RLC     A
0231 F0                MOVX    @DPTR,A
0232         ?C0079:
                                           ; SOURCE LINE # 152
0232 7BFF              MOV     R3,#0FFH
0234 7A00        R     MOV     R2,#HIGH ?SC_299
0236 7900        R     MOV     R1,#LOW ?SC_299
0238 120000      E     LCALL   _printf
023B         ?C0080:
023B 120000      E     LCALL   getchar
023E 8F00        R     MOV     c,R7
0240 BF0AF8            CJNE    R7,#0AH,?C0080
0243         ?C0081:
                                           ; SOURCE LINE # 153
0243 7BFF              MOV     R3,#0FFH
0245 7A00        R     MOV     R2,#HIGH ?SC_348
0247 7900        R     MOV     R1,#LOW ?SC_348
0249 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 154
024C E4                CLR     A
024D F500        R     MOV     ritardo,A
024F F500        R     MOV     ritardo+01H,A
0251         ?C0082:
0251 0500        R     INC     ritardo+01H
0253 E500        R     MOV     A,ritardo+01H
0255 7002              JNZ     ?C0215
0257 0500        R     INC     ritardo
0259         ?C0215:
0259 B488F5            CJNE    A,#088H,?C0082
025C E500        R     MOV     A,ritardo
025E B413F0            CJNE    A,#013H,?C0082
0261         ?C0083:
                                           ; SOURCE LINE # 155
0261 E4                CLR     A
0262 FD                MOV     R5,A
0263 7F01              MOV     R7,#01H
0265 120000      R     LCALL   _test_adc_canale
0268 7E00              MOV     R6,#00H
026A 900000      R     MOV     DPTR,#esito+02H
026D EE                MOV     A,R6
026E F0                MOVX    @DPTR,A
026F A3                INC     DPTR
0270 EF                MOV     A,R7
0271 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 157
0272 600A              JZ      ?C0085
0274 E0                MOVX    A,@DPTR
0275 25E0              ADD     A,ACC
0277 F0                MOVX    @DPTR,A
0278 900000      R     MOV     DPTR,#esito+02H
027B E0                MOVX    A,@DPTR
027C 33                RLC     A
027D F0                MOVX    @DPTR,A
027E         ?C0085:
                                           ; SOURCE LINE # 158
027E 7BFF              MOV     R3,#0FFH
0280 7A00        R     MOV     R2,#HIGH ?SC_299
0282 7900        R     MOV     R1,#LOW ?SC_299
0284 120000      E     LCALL   _printf
0287         ?C0086:
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 16  

0287 120000      E     LCALL   getchar
028A 8F00        R     MOV     c,R7
028C BF0AF8            CJNE    R7,#0AH,?C0086
028F         ?C0087:
                                           ; SOURCE LINE # 159
028F 7BFF              MOV     R3,#0FFH
0291 7A00        R     MOV     R2,#HIGH ?SC_366
0293 7900        R     MOV     R1,#LOW ?SC_366
0295 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 160
0298 E4                CLR     A
0299 F500        R     MOV     ritardo,A
029B F500        R     MOV     ritardo+01H,A
029D         ?C0088:
029D 0500        R     INC     ritardo+01H
029F E500        R     MOV     A,ritardo+01H
02A1 7002              JNZ     ?C0217
02A3 0500        R     INC     ritardo
02A5         ?C0217:
02A5 B488F5            CJNE    A,#088H,?C0088
02A8 E500        R     MOV     A,ritardo
02AA B413F0            CJNE    A,#013H,?C0088
02AD         ?C0089:
                                           ; SOURCE LINE # 161
02AD E4                CLR     A
02AE FD                MOV     R5,A
02AF 7F02              MOV     R7,#02H
02B1 120000      R     LCALL   _test_adc_canale
02B4 7E00              MOV     R6,#00H
02B6 900000      R     MOV     DPTR,#esito+04H
02B9 EE                MOV     A,R6
02BA F0                MOVX    @DPTR,A
02BB A3                INC     DPTR
02BC EF                MOV     A,R7
02BD F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 163
02BE 600A              JZ      ?C0091
02C0 E0                MOVX    A,@DPTR
02C1 25E0              ADD     A,ACC
02C3 F0                MOVX    @DPTR,A
02C4 900000      R     MOV     DPTR,#esito+04H
02C7 E0                MOVX    A,@DPTR
02C8 33                RLC     A
02C9 F0                MOVX    @DPTR,A
02CA         ?C0091:
                                           ; SOURCE LINE # 165
02CA 7BFF              MOV     R3,#0FFH
02CC 7A00        R     MOV     R2,#HIGH ?SC_299
02CE 7900        R     MOV     R1,#LOW ?SC_299
02D0 120000      E     LCALL   _printf
02D3         ?C0092:
02D3 120000      E     LCALL   getchar
02D6 8F00        R     MOV     c,R7
02D8 BF0AF8            CJNE    R7,#0AH,?C0092
02DB         ?C0093:
                                           ; SOURCE LINE # 167
02DB E4                CLR     A
02DC F500        R     MOV     i,A
02DE         ?C0094:
                                           ; SOURCE LINE # 168
                                           ; SOURCE LINE # 169
02DE 7BFF              MOV     R3,#0FFH
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 17  

02E0 7A00        R     MOV     R2,#HIGH ?SC_384
02E2 7900        R     MOV     R1,#LOW ?SC_384
02E4 850000      E     MOV     ?_printf?BYTE+03H,i
02E7 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 170
02EA E500        R     MOV     A,i
02EC 700B              JNZ     ?C0097
                                           ; SOURCE LINE # 171
02EE 7BFF              MOV     R3,#0FFH
02F0 7A00        R     MOV     R2,#HIGH ?SC_397
02F2 7900        R     MOV     R1,#LOW ?SC_397
02F4 850000      E     MOV     ?_printf?BYTE+03H,i
02F7 801C              SJMP    ?C0260
02F9         ?C0097:
                                           ; SOURCE LINE # 172
02F9 E500        R     MOV     A,i
02FB B4010A            CJNE    A,#01H,?C0099
                                           ; SOURCE LINE # 173
02FE 7BFF              MOV     R3,#0FFH
0300 7A00        R     MOV     R2,#HIGH ?SC_487
0302 7900        R     MOV     R1,#LOW ?SC_487
0304 F500        E     MOV     ?_printf?BYTE+03H,A
0306         ?C0259:
0306 800D              SJMP    ?C0260
0308         ?C0099:
                                           ; SOURCE LINE # 174
0308 E500        R     MOV     A,i
030A B4020B            CJNE    A,#02H,?C0098
                                           ; SOURCE LINE # 175
030D 7BFF              MOV     R3,#0FFH
030F 7A00        R     MOV     R2,#HIGH ?SC_539
0311 7900        R     MOV     R1,#LOW ?SC_539
0313 F500        E     MOV     ?_printf?BYTE+03H,A
0315         ?C0260:
0315 120000      E     LCALL   _printf
0318         ?C0098:
                                           ; SOURCE LINE # 176
0318 7BFF              MOV     R3,#0FFH
031A 7A00        R     MOV     R2,#HIGH ?SC_299
031C 7900        R     MOV     R1,#LOW ?SC_299
031E 120000      E     LCALL   _printf
0321         ?C0102:
0321 120000      E     LCALL   getchar
0324 8F00        R     MOV     c,R7
0326 BF0AF8            CJNE    R7,#0AH,?C0102
0329         ?C0103:
                                           ; SOURCE LINE # 178
0329 E500        R     MOV     A,i
032B C3                CLR     C
032C 9402              SUBB    A,#02H
032E 4003              JC      $ + 5H
0330 020000      R     LJMP    ?C0104
                                           ; SOURCE LINE # 179
                                           ; SOURCE LINE # 180
0333 E4                CLR     A
0334 F500        R     MOV     ritardo,A
0336 F500        R     MOV     ritardo+01H,A
0338         ?C0105:
0338 0500        R     INC     ritardo+01H
033A E500        R     MOV     A,ritardo+01H
033C 7002              JNZ     ?C0219
033E 0500        R     INC     ritardo
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 18  

0340         ?C0219:
0340 B410F5            CJNE    A,#010H,?C0105
0343 E500        R     MOV     A,ritardo
0345 B427F0            CJNE    A,#027H,?C0105
0348         ?C0106:
                                           ; SOURCE LINE # 181
0348 E4                CLR     A
0349 F500        R     MOV     ritardo,A
034B F500        R     MOV     ritardo+01H,A
034D         ?C0108:
034D 0500        R     INC     ritardo+01H
034F E500        R     MOV     A,ritardo+01H
0351 7002              JNZ     ?C0221
0353 0500        R     INC     ritardo
0355         ?C0221:
0355 B410F5            CJNE    A,#010H,?C0108
0358 E500        R     MOV     A,ritardo
035A B427F0            CJNE    A,#027H,?C0108
035D         ?C0109:
                                           ; SOURCE LINE # 182
035D E4                CLR     A
035E F500        R     MOV     ritardo,A
0360 F500        R     MOV     ritardo+01H,A
0362         ?C0111:
0362 0500        R     INC     ritardo+01H
0364 E500        R     MOV     A,ritardo+01H
0366 7002              JNZ     ?C0223
0368 0500        R     INC     ritardo
036A         ?C0223:
036A B410F5            CJNE    A,#010H,?C0111
036D E500        R     MOV     A,ritardo
036F B427F0            CJNE    A,#027H,?C0111
0372         ?C0112:
                                           ; SOURCE LINE # 183
0372 E4                CLR     A
0373 F500        R     MOV     ritardo,A
0375 F500        R     MOV     ritardo+01H,A
0377         ?C0114:
0377 0500        R     INC     ritardo+01H
0379 E500        R     MOV     A,ritardo+01H
037B 7002              JNZ     ?C0225
037D 0500        R     INC     ritardo
037F         ?C0225:
037F B410F5            CJNE    A,#010H,?C0114
0382 E500        R     MOV     A,ritardo
0384 B427F0            CJNE    A,#027H,?C0114
0387         ?C0115:
                                           ; SOURCE LINE # 184
0387 E4                CLR     A
0388 F500        R     MOV     ritardo,A
038A F500        R     MOV     ritardo+01H,A
038C         ?C0117:
038C 0500        R     INC     ritardo+01H
038E E500        R     MOV     A,ritardo+01H
0390 7002              JNZ     ?C0227
0392 0500        R     INC     ritardo
0394         ?C0227:
0394 B410F5            CJNE    A,#010H,?C0117
0397 E500        R     MOV     A,ritardo
0399 B427F0            CJNE    A,#027H,?C0117
039C         ?C0118:
                                           ; SOURCE LINE # 185
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 19  

039C E4                CLR     A
039D F500        R     MOV     ritardo,A
039F F500        R     MOV     ritardo+01H,A
03A1         ?C0120:
03A1 0500        R     INC     ritardo+01H
03A3 E500        R     MOV     A,ritardo+01H
03A5 7002              JNZ     ?C0229
03A7 0500        R     INC     ritardo
03A9         ?C0229:
03A9 B410F5            CJNE    A,#010H,?C0120
03AC E500        R     MOV     A,ritardo
03AE B427F0            CJNE    A,#027H,?C0120
03B1         ?C0121:
                                           ; SOURCE LINE # 186
03B1 E4                CLR     A
03B2 F500        R     MOV     ritardo,A
03B4 F500        R     MOV     ritardo+01H,A
03B6         ?C0123:
03B6 0500        R     INC     ritardo+01H
03B8 E500        R     MOV     A,ritardo+01H
03BA 7002              JNZ     ?C0231
03BC 0500        R     INC     ritardo
03BE         ?C0231:
03BE B410F5            CJNE    A,#010H,?C0123
03C1 E500        R     MOV     A,ritardo
03C3 B427F0            CJNE    A,#027H,?C0123
03C6         ?C0124:
                                           ; SOURCE LINE # 187
03C6 E4                CLR     A
03C7 F500        R     MOV     ritardo,A
03C9 F500        R     MOV     ritardo+01H,A
03CB         ?C0126:
03CB 0500        R     INC     ritardo+01H
03CD E500        R     MOV     A,ritardo+01H
03CF 7002              JNZ     ?C0233
03D1 0500        R     INC     ritardo
03D3         ?C0233:
03D3 B410F5            CJNE    A,#010H,?C0126
03D6 E500        R     MOV     A,ritardo
03D8 B427F0            CJNE    A,#027H,?C0126
03DB         ?C0127:
                                           ; SOURCE LINE # 188
03DB E4                CLR     A
03DC F500        R     MOV     ritardo,A
03DE F500        R     MOV     ritardo+01H,A
03E0         ?C0129:
03E0 0500        R     INC     ritardo+01H
03E2 E500        R     MOV     A,ritardo+01H
03E4 7002              JNZ     ?C0235
03E6 0500        R     INC     ritardo
03E8         ?C0235:
03E8 B410F5            CJNE    A,#010H,?C0129
03EB E500        R     MOV     A,ritardo
03ED B427F0            CJNE    A,#027H,?C0129
03F0         ?C0130:
                                           ; SOURCE LINE # 189
03F0 E4                CLR     A
03F1 F500        R     MOV     ritardo,A
03F3 F500        R     MOV     ritardo+01H,A
03F5         ?C0132:
03F5 0500        R     INC     ritardo+01H
03F7 E500        R     MOV     A,ritardo+01H
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 20  

03F9 7002              JNZ     ?C0237
03FB 0500        R     INC     ritardo
03FD         ?C0237:
03FD B410F5            CJNE    A,#010H,?C0132
0400 E500        R     MOV     A,ritardo
0402 B427F0            CJNE    A,#027H,?C0132
0405         ?C0133:
                                           ; SOURCE LINE # 190
0405 E4                CLR     A
0406 F500        R     MOV     ritardo,A
0408 F500        R     MOV     ritardo+01H,A
040A         ?C0135:
040A 0500        R     INC     ritardo+01H
040C E500        R     MOV     A,ritardo+01H
040E 7002              JNZ     ?C0239
0410 0500        R     INC     ritardo
0412         ?C0239:
0412 B410F5            CJNE    A,#010H,?C0135
0415 E500        R     MOV     A,ritardo
0417 B427F0            CJNE    A,#027H,?C0135
041A         ?C0136:
                                           ; SOURCE LINE # 191
041A E4                CLR     A
041B F500        R     MOV     ritardo,A
041D F500        R     MOV     ritardo+01H,A
041F         ?C0138:
041F 0500        R     INC     ritardo+01H
0421 E500        R     MOV     A,ritardo+01H
0423 7002              JNZ     ?C0241
0425 0500        R     INC     ritardo
0427         ?C0241:
0427 B410F5            CJNE    A,#010H,?C0138
042A E500        R     MOV     A,ritardo
042C B427F0            CJNE    A,#027H,?C0138
042F         ?C0139:
                                           ; SOURCE LINE # 192
042F E4                CLR     A
0430 F500        R     MOV     ritardo,A
0432 F500        R     MOV     ritardo+01H,A
0434         ?C0141:
0434 0500        R     INC     ritardo+01H
0436 E500        R     MOV     A,ritardo+01H
0438 7002              JNZ     ?C0243
043A 0500        R     INC     ritardo
043C         ?C0243:
043C B410F5            CJNE    A,#010H,?C0141
043F E500        R     MOV     A,ritardo
0441 B427F0            CJNE    A,#027H,?C0141
0444         ?C0142:
                                           ; SOURCE LINE # 193
0444 E4                CLR     A
0445 F500        R     MOV     ritardo,A
0447 F500        R     MOV     ritardo+01H,A
0449         ?C0144:
0449 0500        R     INC     ritardo+01H
044B E500        R     MOV     A,ritardo+01H
044D 7002              JNZ     ?C0245
044F 0500        R     INC     ritardo
0451         ?C0245:
0451 B410F5            CJNE    A,#010H,?C0144
0454 E500        R     MOV     A,ritardo
0456 B427F0            CJNE    A,#027H,?C0144
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 21  

0459         ?C0145:
                                           ; SOURCE LINE # 194
0459 E4                CLR     A
045A F500        R     MOV     ritardo,A
045C F500        R     MOV     ritardo+01H,A
045E         ?C0147:
045E 0500        R     INC     ritardo+01H
0460 E500        R     MOV     A,ritardo+01H
0462 7002              JNZ     ?C0247
0464 0500        R     INC     ritardo
0466         ?C0247:
0466 B410F5            CJNE    A,#010H,?C0147
0469 E500        R     MOV     A,ritardo
046B B427F0            CJNE    A,#027H,?C0147
046E         ?C0148:
                                           ; SOURCE LINE # 195
046E E4                CLR     A
046F F500        R     MOV     ritardo,A
0471 F500        R     MOV     ritardo+01H,A
0473         ?C0150:
0473 0500        R     INC     ritardo+01H
0475 E500        R     MOV     A,ritardo+01H
0477 7002              JNZ     ?C0249
0479 0500        R     INC     ritardo
047B         ?C0249:
047B B410F5            CJNE    A,#010H,?C0150
047E E500        R     MOV     A,ritardo
0480 B427F0            CJNE    A,#027H,?C0150
0483         ?C0151:
                                           ; SOURCE LINE # 196
0483 E4                CLR     A
0484 F500        R     MOV     ritardo,A
0486 F500        R     MOV     ritardo+01H,A
0488         ?C0153:
0488 0500        R     INC     ritardo+01H
048A E500        R     MOV     A,ritardo+01H
048C 7002              JNZ     ?C0251
048E 0500        R     INC     ritardo
0490         ?C0251:
0490 B410F5            CJNE    A,#010H,?C0153
0493 E500        R     MOV     A,ritardo
0495 B427F0            CJNE    A,#027H,?C0153
0498         ?C0154:
                                           ; SOURCE LINE # 197
0498 E4                CLR     A
0499 F500        R     MOV     ritardo,A
049B F500        R     MOV     ritardo+01H,A
049D         ?C0156:
049D 0500        R     INC     ritardo+01H
049F E500        R     MOV     A,ritardo+01H
04A1 7002              JNZ     ?C0253
04A3 0500        R     INC     ritardo
04A5         ?C0253:
04A5 B410F5            CJNE    A,#010H,?C0156
04A8 E500        R     MOV     A,ritardo
04AA B427F0            CJNE    A,#027H,?C0156
04AD         ?C0157:
                                           ; SOURCE LINE # 198
04AD E4                CLR     A
04AE F500        R     MOV     ritardo,A
04B0 F500        R     MOV     ritardo+01H,A
04B2         ?C0159:
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 22  

04B2 0500        R     INC     ritardo+01H
04B4 E500        R     MOV     A,ritardo+01H
04B6 7002              JNZ     ?C0255
04B8 0500        R     INC     ritardo
04BA         ?C0255:
04BA B410F5            CJNE    A,#010H,?C0159
04BD E500        R     MOV     A,ritardo
04BF B427F0            CJNE    A,#027H,?C0159
04C2         ?C0160:
                                           ; SOURCE LINE # 199
04C2 E4                CLR     A
04C3 F500        R     MOV     ritardo,A
04C5 F500        R     MOV     ritardo+01H,A
04C7         ?C0162:
04C7 0500        R     INC     ritardo+01H
04C9 E500        R     MOV     A,ritardo+01H
04CB 7002              JNZ     ?C0257
04CD 0500        R     INC     ritardo
04CF         ?C0257:
04CF B410F5            CJNE    A,#010H,?C0162
04D2 E500        R     MOV     A,ritardo
04D4 B427F0            CJNE    A,#027H,?C0162
                                           ; SOURCE LINE # 200
04D7         ?C0104:
                                           ; SOURCE LINE # 201
04D7 E500        R     MOV     A,i
04D9 25E0              ADD     A,ACC
04DB 2400        R     ADD     A,#LOW esito
04DD F582              MOV     DPL,A
04DF E4                CLR     A
04E0 3400        R     ADDC    A,#HIGH esito
04E2 F583              MOV     DPH,A
04E4 C083              PUSH    DPH
04E6 C082              PUSH    DPL
04E8 E0                MOVX    A,@DPTR
04E9 FE                MOV     R6,A
04EA A3                INC     DPTR
04EB E0                MOVX    A,@DPTR
04EC FF                MOV     R7,A
04ED C007              PUSH    AR7
04EF C006              PUSH    AR6
04F1 7400        R     MOV     A,#LOW val_atteso
04F3 2500        R     ADD     A,i
04F5 F8                MOV     R0,A
04F6 E6                MOV     A,@R0
04F7 FD                MOV     R5,A
04F8 AF00        R     MOV     R7,i
04FA 120000      R     LCALL   _test_adc_canale
04FD EF                MOV     A,R7
04FE FD                MOV     R5,A
04FF D0E0              POP     ACC
0501 FF                MOV     R7,A
0502 D0E0              POP     ACC
0504 4D                ORL     A,R5
0505 D082              POP     DPL
0507 D083              POP     DPH
0509 CF                XCH     A,R7
050A F0                MOVX    @DPTR,A
050B A3                INC     DPTR
050C EF                MOV     A,R7
050D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 203
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 23  

050E 7BFF              MOV     R3,#0FFH
0510 7A00        R     MOV     R2,#HIGH ?SC_299
0512 7900        R     MOV     R1,#LOW ?SC_299
0514 120000      E     LCALL   _printf
0517         ?C0165:
                                           ; SOURCE LINE # 204
0517 120000      E     LCALL   getchar
051A 8F00        R     MOV     c,R7
051C BF0AF8            CJNE    R7,#0AH,?C0165
                                           ; SOURCE LINE # 205
051F         ?C0096:
051F 0500        R     INC     i
0521 E500        R     MOV     A,i
0523 C3                CLR     C
0524 9408              SUBB    A,#08H
0526 5003              JNC     $ + 5H
0528 020000      R     LJMP    ?C0094
052B         ?C0095:
                                           ; SOURCE LINE # 207
052B 7BFF              MOV     R3,#0FFH
052D 7A00        R     MOV     R2,#HIGH ?SC_629
052F 7900        R     MOV     R1,#LOW ?SC_629
0531 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 209
0534 E4                CLR     A
0535 F500        R     MOV     i,A
0537         ?C0167:
                                           ; SOURCE LINE # 210
                                           ; SOURCE LINE # 211
0537 7400        R     MOV     A,#LOW val_atteso
0539 2500        R     ADD     A,i
053B F8                MOV     R0,A
053C E6                MOV     A,@R0
053D FF                MOV     R7,A
053E E500        R     MOV     A,i
0540 25E0              ADD     A,ACC
0542 2400        R     ADD     A,#LOW canale
0544 F8                MOV     R0,A
0545 E6                MOV     A,@R0
0546 FC                MOV     R4,A
0547 08                INC     R0
0548 E6                MOV     A,@R0
0549 C3                CLR     C
054A 9F                SUBB    A,R7
054B FF                MOV     R7,A
054C EC                MOV     A,R4
054D 9400              SUBB    A,#00H
054F FE                MOV     R6,A
0550 120000      E     LCALL   _abs
0553 D3                SETB    C
0554 EF                MOV     A,R7
0555 940D              SUBB    A,#0DH
0557 EE                MOV     A,R6
0558 6480              XRL     A,#080H
055A 9480              SUBB    A,#080H
055C 5020              JNC     ?C0170
055E E500        R     MOV     A,i
0560 25E0              ADD     A,ACC
0562 2400        R     ADD     A,#LOW esito
0564 F582              MOV     DPL,A
0566 E4                CLR     A
0567 3400        R     ADDC    A,#HIGH esito
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 24  

0569 F583              MOV     DPH,A
056B A3                INC     DPTR
056C E0                MOVX    A,@DPTR
056D 20E10E            JB      ACC.1,?C0170
                                           ; SOURCE LINE # 212
0570 7800        R     MOV     R0,#LOW result
0572 7C00        R     MOV     R4,#HIGH result
0574 7D00              MOV     R5,#00H
0576 7BFF              MOV     R3,#0FFH
0578 7A00        R     MOV     R2,#HIGH ?SC_96
057A 7900        R     MOV     R1,#LOW ?SC_96
057C 800C              SJMP    ?C0261
057E         ?C0170:
                                           ; SOURCE LINE # 214
057E 7800        R     MOV     R0,#LOW result
0580 7C00        R     MOV     R4,#HIGH result
0582 7D00              MOV     R5,#00H
0584 7BFF              MOV     R3,#0FFH
0586 7A00        R     MOV     R2,#HIGH ?SC_99
0588 7900        R     MOV     R1,#LOW ?SC_99
058A         ?C0261:
058A 120000      E     LCALL   ?C?STRCPY
058D         ?C0171:
                                           ; SOURCE LINE # 215
058D 850000      E     MOV     ?_printf?BYTE+03H,i
0590 E500        R     MOV     A,i
0592 25E0              ADD     A,ACC
0594 2400        R     ADD     A,#LOW canale
0596 F8                MOV     R0,A
0597 E6                MOV     A,@R0
0598 FC                MOV     R4,A
0599 08                INC     R0
059A E6                MOV     A,@R0
059B FD                MOV     R5,A
059C 8C00        E     MOV     ?_printf?BYTE+04H,R4
059E F500        E     MOV     ?_printf?BYTE+05H,A
05A0 E4                CLR     A
05A1 120000      E     LCALL   ?C?FCASTI
05A4 7B2E              MOV     R3,#02EH
05A6 7A90              MOV     R2,#090H
05A8 79A0              MOV     R1,#0A0H
05AA 783C              MOV     R0,#03CH
05AC 120000      E     LCALL   ?C?FPMUL
05AF 8F00        E     MOV     ?_printf?BYTE+09H,R7
05B1 8E00        E     MOV     ?_printf?BYTE+08H,R6
05B3 8D00        E     MOV     ?_printf?BYTE+07H,R5
05B5 8C00        E     MOV     ?_printf?BYTE+06H,R4
05B7 7400        R     MOV     A,#LOW val_atteso
05B9 2500        R     ADD     A,i
05BB F8                MOV     R0,A
05BC E6                MOV     A,@R0
05BD FD                MOV     R5,A
05BE 7C00              MOV     R4,#00H
05C0 E4                CLR     A
05C1 120000      E     LCALL   ?C?FCASTI
05C4 7B2E              MOV     R3,#02EH
05C6 7A90              MOV     R2,#090H
05C8 79A0              MOV     R1,#0A0H
05CA 783C              MOV     R0,#03CH
05CC 120000      E     LCALL   ?C?FPMUL
05CF 8F00        E     MOV     ?_printf?BYTE+0DH,R7
05D1 8E00        E     MOV     ?_printf?BYTE+0CH,R6
C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 25  

05D3 8D00        E     MOV     ?_printf?BYTE+0BH,R5
05D5 8C00        E     MOV     ?_printf?BYTE+0AH,R4
05D7 7BFF              MOV     R3,#0FFH
05D9 7A00        R     MOV     R2,#HIGH ?SC_649
05DB 7900        R     MOV     R1,#LOW ?SC_649
05DD 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 216
05E0 750000      E     MOV     ?_printf?BYTE+03H,#00H
05E3 750000      R     MOV     ?_printf?BYTE+04H,#HIGH result
05E6 750000      R     MOV     ?_printf?BYTE+05H,#LOW result
05E9 7BFF              MOV     R3,#0FFH
05EB 7A00        R     MOV     R2,#HIGH ?SC_173
05ED 7900        R     MOV     R1,#LOW ?SC_173
05EF 120000      E     LCALL   _printf
                                           ; SOURCE LINE # 217
05F2 0500        R     INC     i
05F4 E500        R     MOV     A,i
05F6 C3                CLR     C
05F7 9408              SUBB    A,#08H
05F9 5003              JNC     $ + 5H
05FB 020000      R     LJMP    ?C0167
05FE         ?C0168:
                                           ; SOURCE LINE # 218
05FE 120000      E     LCALL   getchar
                                           ; SOURCE LINE # 219
0601 7BFF              MOV     R3,#0FFH
0603 7A00        R     MOV     R2,#HIGH ?SC_711
0605 7900        R     MOV     R1,#LOW ?SC_711
0607 020000      E     LJMP    _printf
             ; FUNCTION test_adc (END)

C51 COMPILER V8.05a   ADC                                                                  03/11/2010 12:19:51 PAGE 26  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


P1 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0090H  1
tipo_scheda. . . . . . . . . . . . . .  EXTERN   DATA   U_CHAR   -----  1
size_t . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
_test_adc_canale . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  i. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0000H  1
  val. . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0001H  1
  ret. . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0002H  1
_printf. . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
result . . . . . . . . . . . . . . . .  STATIC   DATA   ARRAY    0000H  3
num_s. . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0003H  1
esito. . . . . . . . . . . . . . . . .  STATIC   XDATA  ARRAY    0000H  16
adc. . . . . . . . . . . . . . . . . .  PUBLIC   DATA   PTR      0004H  2
appo . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_INT    0006H  2
_abs . . . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
val_atteso . . . . . . . . . . . . . .  STATIC   DATA   ARRAY    0008H  8
test_adc . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  ritardo. . . . . . . . . . . . . . .  AUTO     DATA   INT      0000H  2
EOC. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0092H  1
c. . . . . . . . . . . . . . . . . . .  PUBLIC   DATA   CHAR     0010H  1
getchar. . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
canale . . . . . . . . . . . . . . . .  STATIC   DATA   ARRAY    0011H  16
i. . . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0021H  1
k. . . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0022H  1
wchar_t. . . . . . . . . . . . . . . .  TYPEDEF  -----  CHAR     -----  1
s. . . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0023H  1


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1935    ----
   CONSTANT SIZE    =    714    ----
   XDATA SIZE       =     16    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     36       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
